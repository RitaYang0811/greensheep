import{S as h}from"./sweetalert2.all-D7bwkDQL.js";import{_ as p,c as l,b as t,f as u,t as c,F as d,r as f,o as n,y as g,w as m,k as v}from"./index-CtjhObmR.js";var x={VITE_APP_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_API_NAME:"greensheep",BASE_URL:"/greensheep/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:P,VITE_APP_API_NAME:y}=x,I={data(){return{myFavoritesId:[],myFavoriteProducts:[]}},methods:{checkLogin(){localStorage.getItem("userInfo")?this.getFavorites():h.fire({title:"您尚未登入?",icon:"warning",confirmButtonColor:"#d33",cancelButtonColor:"#566b5a",confirmButtonText:"  是  "}).then(()=>{this.$router.push("/memberLogin")})},getFavorites(){let r=localStorage.getItem("userInfo");const e=JSON.parse(r).id;this.$http.get("https://greensheep-json-server.onrender.com/favorites").then(o=>{o.data.forEach(i=>{i.userId==e&&this.myFavoritesId.push(i)}),this.getFavoriteProducts()}).catch(o=>{console.log(o)})},getFavoriteProducts(){const r=`${P}/api/${y}/products/all`;this.$http.get(r).then(e=>{e.data.products.forEach(a=>{this.myFavoritesId.forEach(o=>{a.id==o.productId&&this.myFavoriteProducts.push(a)})})}).catch(e=>{console.log(e)})}},mounted(){this.checkLogin()}},F=t("h1",{class:"fs-3 fs-lg-2 text-start mb-6 fw-bold"},"我的收藏",-1),w={class:"d-flex flex-wrap row row-cols-2 row-cols-md-4"},E={class:"position-relative",style:{width:"100%","padding-top":"100%"}},b=["src"],A={class:"card-body text-start d-flex flex-column justify-content-between p-1 flex-grow-1"},U={class:"card-title display-8 text-dark pt-2"},k={class:"mb-2"},S={class:"text-grey66"},$={class:"card-text display-8 text-primary py-2"};function B(r,e,a,o,i,V){const _=v("router-link");return n(),l(d,null,[F,t("div",w,[u(c(console.log(i.myFavoriteProducts))+" ",1),(n(!0),l(d,null,f(i.myFavoriteProducts,s=>(n(),g(_,{to:`/products/detail/${s.id}`,class:"col d-flex flex-column product-item mb-6",key:s.id},{default:m(()=>[t("div",E,[t("img",{src:s.imageUrl,class:"card-img-top position-absolute top-0 start-0 object-fit-cover h-100"},null,8,b)]),t("div",A,[t("h5",U,[t("div",k,c(s.title),1),t("div",S,c(s.category),1)]),t("p",$,"NT$"+c(s.price),1)])]),_:2},1032,["to"]))),128))])],64)}const N=p(I,[["render",B]]);export{N as default};
