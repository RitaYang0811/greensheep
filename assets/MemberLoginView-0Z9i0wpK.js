import{_ as g,Q as b,c as v,b as e,e as r,d as l,w as m,r as c,o as w,x as h}from"./index-DPIE8VT_.js";import{_ as y,a as x}from"./line-messenger-Chj3vcSw.js";import{_ as L}from"./GreenSheep-DGMgQRZ1.js";const k="https://greensheep-json-server.onrender.com",E={data(){return{user:{},userInfo:{},GOOGLECLIENT:"780150754854-h5d15n56b8clqorddealcei20qcv17dd.apps.googleusercontent.com",googleToken:null}},methods:{emailRule(s){return/^[\w\.-]+@(gmail\.com|yahoo\.com\.tw)$/.test(s)?!0:"請輸入Gmail/Yahoo帳號"},passwordRule(s){return s!==void 0&&/^(?!.*\d{6,})(?!.*(.)\1{4,}).{6,12}$/.test(s)?!0:"請輸入正確密碼"},onSubmit(){console.log(this.user),this.$http.post(`${k}/login`,this.user).then(s=>{this.userInfo.token=s.data.accessToken,this.userInfo.id=s.data.user.id,localStorage.setItem("userInfo",JSON.stringify(this.userInfo)),this.$router.push({name:"MemberLayout"})}).catch(s=>{alert("帳號或密碼錯誤!"),this.$router.push({name:"MemberLogin"})})},accessTokenLogin(){b({clientId:this.GOOGLECLIENT}).then(s=>{this.googleToken=s.access_token,this.fetchContactInfo()})},async fetchContactInfo(){try{const s=await this.$http.get("https://www.googleapis.com/oauth2/v1/userinfo",{headers:{Authorization:`Bearer ${this.googleToken}`}});this.$router.push({path:"/loginLoading",query:{googleEmail:s.data.email}})}catch(s){console.error("獲取聯絡人信息時出錯:",s)}},lineLoginEvent(){let s="2003862374",t=encodeURIComponent("http://localhost:5173/greensheep/#/loginLoading"),o="https://access.line.me/oauth2/v2.1/authorize?";o+="response_type=code",o+=`&client_id=${s}`,o+=`&redirect_uri=${t}`,o+="&state=123456789",o+="&scope=openid%20profile%20email",o+="&nonce=helloWorld",o+="&prompt= consent",o+="&max_age=3600",o+="&ui_locales=zh-TW",o+="&bot_prompt=normal",window.open(o,"_self")}}},I={class:"d-flex flex-column align-items-center py-15"},C=e("div",null,[e("h2",{class:"fs-2"},"WELCOME"),e("p",{class:"text-primary"},"Discover Your Unique Elegance")],-1),T={class:"w-50 member-content"},V={class:"d-flex flex-column align-items-center py-8"},U=e("h1",{class:"fs-1 mb-8"},"會員登入",-1),G={class:"list-unstyled"},S={class:"py-3"},N=e("img",{src:y,alt:""},null,-1),O={class:"py-3"},R=e("img",{src:x,alt:""},null,-1),$=e("p",{class:"d-flex justify-content-center align-items-center py-6 hr-line"},"or",-1),j={class:"form-floating mb-3"},q=e("label",{for:"email"},"請輸入Email",-1),z={class:"form-floating mb-3"},B=e("label",{for:"password"},"請輸入密碼(6-12字元且不連續)",-1),M=e("button",{type:"submit",class:"d-flex justify-content-center align-items-center btn btn-primary sub-button"},[e("div",{class:"button-img-box me-1"},[e("img",{src:L,alt:"圖像"})]),e("p",null,"立即登入")],-1),W={class:"mb-3 d-flex justify-content-between"},Y={class:"mt-1 text-start"},D={class:"mt-1 text-end"};function H(s,t,o,A,i,n){const u=c("v-field"),p=c("error-message"),f=c("v-form"),_=c("router-link");return w(),v("div",I,[C,e("div",T,[e("div",V,[U,e("div",null,[e("ul",G,[e("li",S,[e("button",{type:"button",onClick:t[0]||(t[0]=(...a)=>n.accessTokenLogin&&n.accessTokenLogin(...a)),class:"p-3 google-account"},[N,r("Google 登 入 ")])]),e("li",O,[e("button",{class:"p-3 line-account",onClick:t[1]||(t[1]=(...a)=>n.lineLoginEvent&&n.lineLoginEvent(...a))},[R,r(" Line 登 入 ")])])]),$,l(f,{ref:"form",class:"member-form",onSubmit:n.onSubmit},{default:m(({errors:a})=>[e("div",j,[l(u,{name:"email",type:"email",class:h(["form-control",{"is-invalid":a.email}]),id:"email","aria-describedby":"emailHelp",placeholder:"請輸入Email (Google/Yahoo)",rules:n.emailRule,modelValue:i.user.email,"onUpdate:modelValue":t[2]||(t[2]=d=>i.user.email=d)},null,8,["class","rules","modelValue"]),q,l(p,{name:"email",class:"invalid-feedback text-start"})]),e("div",z,[l(u,{name:"password",type:"password",class:h(["form-control",{"is-invalid":a.password}]),id:"password","aria-describedby":"passwordHelp",placeholder:"請輸入密碼(6-12字元且不連續)",rules:n.passwordRule,modelValue:i.user.password,"onUpdate:modelValue":t[3]||(t[3]=d=>i.user.password=d)},null,8,["class","rules","modelValue"]),B,l(p,{name:"password",class:"invalid-feedback text-start"})]),M]),_:1},8,["onSubmit"]),e("div",W,[e("p",Y,[l(_,{to:"/memberForget"},{default:m(()=>[r("忘記密碼")]),_:1})]),e("p",D,[r(" 還沒有帳號嗎？前往"),l(_,{to:"/memberSignUp",class:"text-decoration-underline"},{default:m(()=>[r("註冊")]),_:1})])])])])])])}const K=g(E,[["render",H]]);export{K as default};
