import{_ as f,Q as b,c as y,e,b as l,w as m,d,j as c,o as v,x as u}from"./index-BCSXIYdC.js";import{_ as w,a as k}from"./line-image-EM7MkwlQ.js";import{_ as x}from"./GreenSheep-DGMgQRZ1.js";const E="https://greensheep-json-server.onrender.com",L={data(){return{user:{},userInfo:{},GOOGLECLIENT:"780150754854-h5d15n56b8clqorddealcei20qcv17dd.apps.googleusercontent.com",googleToken:null,initCount:0,checkEyeState:!1,isActive:!1}},methods:{emailRule(s){return/^[\w\.-]+@(gmail\.com|yahoo\.com\.tw)$/.test(s)?!0:"請輸入Gmail/Yahoo帳號"},passwordRule(s){return s!==void 0&&/^(?!.*\d{6,})(?!.*(.)\1{4,}).{6,12}$/.test(s)?(this.checkEyeState=!1,!0):(this.initCount&&(this.checkEyeState=!0),this.initCount+=1,"請輸入正確密碼")},onSubmit(){this.$http.post(`${E}/login`,this.user).then(s=>{this.userInfo.token=s.data.accessToken,this.userInfo.id=s.data.user.id,localStorage.setItem("userInfo",JSON.stringify(this.userInfo)),this.$router.push({name:"MemberLayout"})}).catch(s=>{alert("帳號或密碼錯誤!"),this.$router.push({name:"MemberLogin"})})},accessTokenLogin(){b({clientId:this.GOOGLECLIENT}).then(s=>{this.googleToken=s.access_token,this.fetchContactInfo()})},async fetchContactInfo(){try{const s=await this.$http.get("https://www.googleapis.com/oauth2/v1/userinfo",{headers:{Authorization:`Bearer ${this.googleToken}`}});this.$router.push({path:"/loginLoading",query:{googleEmail:s.data.email}})}catch(s){console.error("獲取聯絡人信息時出錯:",s)}},lineLoginEvent(){let s="2003862374",t=encodeURIComponent("http://localhost:5173/greensheep/#/loginLoading"),o="https://access.line.me/oauth2/v2.1/authorize?";o+="response_type=code",o+=`&client_id=${s}`,o+=`&redirect_uri=${t}`,o+="&state=123456789",o+="&scope=openid%20profile%20email",o+="&nonce=helloWorld",o+="&prompt= consent",o+="&max_age=3600",o+="&ui_locales=zh-TW",o+="&bot_prompt=normal",window.open(o,"_self")}}},I={class:"d-flex flex-column align-items-center py-15"},C=e("div",null,[e("h2",{class:"fs-2"},"WELCOME"),e("p",{class:"text-primary"},"Discover Your Unique Elegance")],-1),T={class:"w-50 member-content"},S={class:"d-flex flex-column align-items-center py-8"},V=e("h1",{class:"fs-1 mb-8"},"會員登入",-1),U={class:"list-unstyled"},G={class:"py-3"},N=e("span",{class:"g-login-btnIcon"},[e("img",{src:w,alt:"line圖片"})],-1),j=e("span",{class:"g-login-btnText"},"Google登入",-1),A=[N,j],B={class:"py-3"},O=e("span",{class:"g-login-btnIcon"},[e("img",{src:k,alt:"line圖片"})],-1),R=e("span",{class:"g-login-btnText"},"LINE登入",-1),q=[O,R],z=e("p",{class:"d-flex justify-content-center align-items-center py-6 hr-line"},"or",-1),M={class:"form-floating mb-3"},W=e("label",{for:"email"},"請輸入Email",-1),Y={class:"form-floating mb-3"},D=e("label",{for:"password"},"請輸入密碼(6-12字元且不連續)",-1),H=e("button",{type:"submit",class:"d-flex justify-content-center align-items-center btn btn-primary sub-button"},[e("div",{class:"button-img-box me-1"},[e("img",{src:x,alt:"圖像"})]),e("p",null,"立即登入")],-1),F={class:"mb-3 d-flex justify-content-between"},J={class:"mt-1 text-start"},Q={class:"mt-1 text-end"};function $(s,t,o,K,n,i){const p=c("v-field"),h=c("error-message"),g=c("v-form"),_=c("router-link");return v(),y("div",I,[C,e("div",T,[e("div",S,[V,e("div",null,[e("ul",U,[e("li",G,[e("button",{class:"g-login-btn g-login-btn--google ji-mb-10",onClick:t[0]||(t[0]=(...a)=>i.accessTokenLogin&&i.accessTokenLogin(...a))},A)]),e("li",B,[e("button",{class:"g-login-btn g-login-btn--line mt-3",onClick:t[1]||(t[1]=(...a)=>i.lineLoginEvent&&i.lineLoginEvent(...a))},q)])]),z,l(g,{ref:"form",class:"member-form",onSubmit:i.onSubmit},{default:m(({errors:a})=>[e("div",M,[l(p,{name:"email",type:"email",class:u(["form-control",{"is-invalid":a.email}]),id:"email","aria-describedby":"emailHelp",placeholder:"請輸入Email (Google/Yahoo)",rules:i.emailRule,modelValue:n.user.email,"onUpdate:modelValue":t[2]||(t[2]=r=>n.user.email=r)},null,8,["class","rules","modelValue"]),W,l(h,{name:"email",class:"invalid-feedback text-start"})]),e("div",Y,[l(p,{name:"password",type:n.isActive?"text":"password",class:u(["form-control",{"is-invalid":a.password}]),id:"password","aria-describedby":"passwordHelp",placeholder:"請輸入密碼(6-12字元且不連續)",rules:i.passwordRule,modelValue:n.user.password,"onUpdate:modelValue":t[3]||(t[3]=r=>n.user.password=r)},null,8,["type","class","rules","modelValue"]),D,e("i",{class:u(["checkByEye",[n.isActive?"bi-eye":"bi-eye-slash","bi",{"checkByEye-alert":n.checkEyeState}]]),onClick:t[4]||(t[4]=r=>n.isActive=!n.isActive)},null,2),l(h,{name:"password",class:"invalid-feedback text-start"})]),H]),_:1},8,["onSubmit"]),e("div",F,[e("p",J,[l(_,{to:"/memberForget"},{default:m(()=>[d("忘記密碼")]),_:1})]),e("p",Q,[d(" 還沒有帳號嗎？前往"),l(_,{to:"/memberSignUp",class:"text-decoration-underline"},{default:m(()=>[d("註冊")]),_:1})])])])])])])}const ee=f(L,[["render",$]]);export{ee as default};
