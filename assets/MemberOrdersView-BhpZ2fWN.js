import{_ as m,c as o,e as t,F as _,r as p,o as c,t as u}from"./index-BbkPRlvS.js";var d={VITE_APP_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_API_NAME:"greensheep",BASE_URL:"/greensheep/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:g,VITE_APP_API_NAME:f}=d,y={data(){return{userEmail:"",userOrders:[]}},methods:{getUser(){let e=localStorage.getItem("userInfo");const s=JSON.parse(e).id;this.$http.get("https://greensheep-json-server.onrender.com/users").then(a=>{a.data.forEach(i=>{i.id==s&&(this.userEmail=i.email)})}).catch(a=>{console.log(a)})},getOrders(){const e=`${g}/api/${f}/orders`;this.$http.get(e).then(s=>{s.data.orders.forEach(r=>{r.user.email==this.userEmail&&this.userOrders.push(r)}),console.log(this.userOrders)}).catch(s=>{console.log(s)})},printProducts(e){const s=Object.values(e);let r="";return s.forEach(a=>{r=r+`${a.product.title}, `}),r},printDate(e){let s=0,r=0,a=0;return e=new Date(e*1e3),s=e.getFullYear(),r=e.getMonth(),a=e.getDate(),`${s} / ${r+1} / ${a}`},getDate(e){console.log(new Date(e*1e3).getFullYear())},printStatus(e){if(e.done)return"訂單已完成";if(e.sendProduct)return"商品已寄出";if(e.making)return"商品製作中";if(e.getOrder)return"收到訂單";console.log(e)}},mounted(){this.getUser(),this.getOrders()}},E=t("h1",{class:"fs-3 fs-lg-2 text-start mb-6"},"所有訂單",-1),P={class:"table"},O=t("thead",{class:"bg-transparent"},[t("tr",null,[t("th",{scope:"col",class:"py-4 text-primary fw-medium"}," 訂單編號 "),t("th",{scope:"col",class:"py-4 text-primary fw-medium"}," 下訂日期 "),t("th",{scope:"col",class:"py-4 text-primary fw-medium"}," 商品資訊 "),t("th",{scope:"col",class:"py-4 text-primary fw-medium"}," 訂單狀態 ")])],-1),x={class:"bg-transparent"},A={scope:"row",class:"py-4 text-primary fw-medium"},b={class:"py-4 text-primary"},I={class:"py-4 text-primary"},D={class:""},w={class:"btn btn-primary"};function S(e,s,r,a,i,h){return c(),o(_,null,[E,t("table",P,[O,t("tbody",x,[(c(!0),o(_,null,p(i.userOrders,n=>(c(),o("tr",{key:n.id},[t("th",A,u(n==null?void 0:n.create_at),1),t("td",b,u(h.printDate(n==null?void 0:n.create_at)),1),t("td",I,[(c(!0),o(_,null,p(Object.values(n.products),l=>(c(),o("div",{class:"",key:l==null?void 0:l.id},u(l==null?void 0:l.product.title),1))),128))]),t("td",D,[t("span",w,u(h.printStatus(n.orderStatus)),1)])]))),128))])])],64)}const U=m(y,[["render",S]]);export{U as default};
