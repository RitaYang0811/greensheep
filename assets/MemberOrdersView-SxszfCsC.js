import{_ as y,c as n,b as s,F as r,r as h,o as _,t as l,e as v}from"./index-PEAonJb-.js";var w={VITE_APP_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_API_NAME:"greensheep",VITE_LINE_CLIENT_ID:"x9iTcS6m9Fdlz8XFfAbkqs",VITE_LINE_CLIENT_SECRET:"iGiOLRLmU2aNTDuObVQlcP5XzPYSbUzJ9gvUl4YvPzx",BASE_URL:"/greensheep/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:E,VITE_APP_API_NAME:I}=w,O={data(){return{userEmail:"",userOrders:[]}},methods:{getUser(){let e=localStorage.getItem("userInfo");const i=JSON.parse(e).id;this.$http.get("https://greensheep-json-server.onrender.com/users").then(c=>{c.data.forEach(d=>{d.id==i&&(this.userEmail=d.email)})}).catch(c=>{console.log(c)})},getOrders(){const e=`${E}/api/${I}/orders`;this.$http.get(e).then(i=>{i.data.orders.forEach(a=>{a.user.email==this.userEmail&&this.userOrders.push(a)})}).catch(i=>{console.log(i)})},printProducts(e){const i=Object.values(e);let a="";return i.forEach(c=>{a=a+`${c.product.title}, `}),a},printDate(e){let i=0,a=0,c=0;return e=new Date(e*1e3),i=e.getFullYear(),a=e.getMonth(),c=e.getDate(),`${i} / ${a+1} / ${c}`},printStatus(e){return e!=null&&e.done?"訂單已完成":e!=null&&e.sendProduct?"商品已寄出":e!=null&&e.making?"商品製作中":"收到訂單"}},mounted(){this.getUser(),this.getOrders()}},P=s("h1",{class:"fs-3 fs-lg-2 text-start mb-6 fw-bold"},"所有訂單",-1),T={class:"table"},A=s("thead",{class:"bg-primary"},[s("tr",null,[s("th",{scope:"col",class:"py-4 text-white fw-bold"},"訂單編號"),s("th",{scope:"col",class:"py-4 text-white fw-bold"},"下訂日期"),s("th",{scope:"col",class:"py-4 text-white fw-bold"},"商品資訊"),s("th",{scope:"col",class:"py-4 text-white fw-bold"},"訂單狀態"),s("th",{scope:"col",class:"py-4 text-white fw-bold"},"詳細資料")])],-1),L={class:"bg-white"},S={scope:"row",class:"py-4 text-primary fw-medium align-middle"},N={class:"py-4 text-primary align-middle"},U={class:"py-4 text-primary"},V={class:"align-middle"},$={class:"text-primary fw-bold"},D={class:"align-middle"},j=["data-bs-target"],k=s("i",{class:"bi bi-box-arrow-up-right"},null,-1),M=[k],R=["id"],C={class:"modal-dialog modal-lg"},F={class:"modal-content"},z={class:"modal-header bg-primary"},B={class:"modal-title fs-5 text-light",id:"exampleModalLabel"},q=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),X={class:"modal-body"},Y=["id"],J={class:"accordion-body p-1"},G={class:"ms-3 d-flex align-items-center"},Q={class:"fw-medium text-grey66 fs-8 m-2"},H={class:"fs-6 fw-medium text-dark"},K={class:"me-7 d-flex text-grey99"},W={class:"mx-3"},Z=s("div",{class:"my-4 border border-1"},null,-1),ss={class:"d-flex justify-content-between mx-4 text-grey66"},ts={class:"ms-1"},es={class:"ms-2 fs-8 text-secondary fw-medium"},ls={class:"text-primary fw-medium"},os=s("div",{class:"my-4 border"},null,-1),is={class:"mb-4"},as={class:"fs-6 text-primary ms-3 text-start"},cs={class:"mx-2 mb-3"},ns={class:"mx-2 mb-3"},_s={class:"mx-2 mb-3"},ds={class:"mx-2 mb-3"},rs={class:"mx-2 mb-3"},hs=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"},"Close")],-1);function ms(e,i,a,c,d,m){return _(),n(r,null,[P,s("table",T,[A,s("tbody",L,[(_(!0),n(r,null,h(d.userOrders,t=>{var u,p,b,f,g,x;return _(),n("tr",{key:t.id},[s("th",S,l(t==null?void 0:t.create_at),1),s("td",N,l(m.printDate(t==null?void 0:t.create_at)),1),s("td",U,[(_(!0),n(r,null,h(Object.values(t.products),o=>(_(),n("div",{class:"mb-1",key:o==null?void 0:o.id},l(o==null?void 0:o.product.title)+" X "+l(o==null?void 0:o.qty),1))),128))]),s("td",V,[s("span",$,l(m.printStatus(t.orderStatus)),1)]),s("td",D,[s("a",{href:"",class:"p-3","data-bs-toggle":"modal","data-bs-target":`#${t.id}`},M,8,j)]),s("div",{class:"modal fade",id:t.id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[s("div",C,[s("div",F,[s("div",z,[s("h1",B,"訂單編號："+l(t==null?void 0:t.create_at),1),q]),s("div",X,[s("div",{id:t.id,class:"accordion-collapse collapse show",ref_for:!0,ref:"collape"},[s("div",J,[(_(!0),n(r,null,h(Object.values(t.products),o=>(_(),n("div",{class:"d-flex align-items-center justify-content-between my-1",key:o.id},[s("div",G,[s("span",Q,l(o.product.category)+" / ",1),s("h3",H,l(o.product.title),1)]),s("div",K,[s("span",W,"數量："+l(o.qty),1),s("p",null,"總價："+l(o.total),1)])]))),128)),Z,s("div",ss,[s("p",ts,[v(" 優惠券： "),s("span",es,l((p=(u=Object.values(t.products)[0])==null?void 0:u.coupon)==null?void 0:p.code),1)]),s("p",ls,"總金額：NT$ "+l((f=(b=Object.values(t.products)[0])==null?void 0:b.coupon)!=null&&f.discount_price?parseInt(t.total)-((x=(g=Object.values(t.products)[0])==null?void 0:g.coupon)==null?void 0:x.discount_price):parseInt(t.total)),1)]),os,s("div",is,[s("div",as,[s("p",cs,"客戶姓名："+l(t.user.name),1),s("p",ns,"客戶電話："+l(t.user.tel),1),s("p",_s,"客戶地址："+l(t.user.address),1),s("p",ds,"客戶Email："+l(t.user.email),1),s("p",rs,"備註："+l(t.message),1)])])])],8,Y)]),hs])])],8,R)])}),128))])])],64)}const ps=y(O,[["render",ms]]);export{ps as default};
