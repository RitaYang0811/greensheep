import{_ as C,m as V,a as q,c as p,b as e,F as w,j as U,e as h,t as m,d as l,w as b,r as _,o as u,k as x,f,v as D,x as c,P as O,h as v,u as S}from"./index-DPIE8VT_.js";import{c as g}from"./cartStore-BNxPeN_I.js";import"./sweetalert2.all-D958VX0y.js";const A={data(){return{agree:!1,recipientAsOrderData:!1,recipient:{name:"",tel:"",address:""},orderData:{user:{name:"",email:"",tel:"",address:""},message:"",birthday:""},orderDeliverData:{}}},methods:{...V(g,["getCarts","updateCart","deleteCart"]),showAddress(){if(this.orderDeliverData.deliver=="中華郵政"||this.orderDeliverData.deliver=="黑貓宅急便"||this.orderDeliverData.deliver=="宅配通"||this.orderDeliverData.deliver=="UPS"||this.orderDeliverData.deliver=="DHL")return!0},showStore(){if(this.orderDeliverData.deliver=="7-11取貨"||this.orderDeliverData.deliver=="全家取貨"||this.orderDeliverData.deliver=="OK取貨"||this.orderDeliverData.deliver=="萊爾富取貨")return!0},showCreditCard(){return this.orderDeliverData.payWay!="信用卡"},sendOrder(){this.showStore()&&(this.recipient.address=`${this.orderDeliverData.deliver} XX店`),this.orderData.user.name=this.recipient.name,this.orderData.user.tel=this.recipient.tel,this.orderData.user.address=this.recipient.address,this.$http.post("https://ec-course-api.hexschool.io/v2/api/greensheep/order",{data:this.orderData}).then(()=>{this.getCarts(),this.$router.push("/success")})}},computed:{...q(g,["carts","deliverData"]),total(){let o=0;return this.carts.forEach(i=>{o+=i.final_total}),o}},watch:{recipientAsOrderData(o){o&&(this.recipient.name=this.orderData.user.name,this.recipient.tel=this.orderData.user.tel)}},mounted(){this.orderDeliverData={...this.deliverData}}},E=e("h1",null,"訂單頁面(定位用，完成刪除)",-1),N={class:"container py-20"},j=e("div",{class:"mb-30"},[e("div",{class:"position-relative m-4 w-75 mx-auto"},[e("div",{class:"progress"},[e("div",{class:"progress-bar",role:"progressbar",style:{width:"0%"},"aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"})]),e("button",{type:"button",class:"position-absolute top-0 start-0 translate-middle btn btn-sm btn-primary rounded-pill pe-none",style:{width:"3rem",height:"3rem"}}," 1 "),e("button",{type:"button",class:"position-absolute top-0 start-50 translate-middle btn btn-sm btn-primary rounded-pill pe-none",style:{width:"3rem",height:"3rem"}}," 2 "),e("button",{type:"button",class:"position-absolute top-0 start-100 translate-middle btn btn-sm bg-white rounded-pill border border-1 border-primary text-primary pe-none",style:{width:"3rem",height:"3rem"}}," 3 ")]),e("div",{class:"position-relative mt-15 w-75 mx-auto"},[e("p",{class:"position-absolute top-0 start-0 translate-middle text-primary"}," 確認購買明細 "),e("p",{class:"position-absolute top-0 start-50 translate-middle text-primary"}," 付款資料填寫 "),e("p",{class:"position-absolute top-0 end-n7 translate-middle text-primary"}," 訂單完成 ")])],-1),M={class:""},P={class:"table align-middle border-primary"},B=e("thead",null,[e("tr",null,[e("th",{scope:"col",class:"text-primary fw-medium"},"商品資訊"),e("th",{scope:"col",class:"text-primary fw-medium"},"數量"),e("th",{scope:"col",class:"text-primary fw-medium"},"價格"),e("th",{scope:"col",class:"text-primary fw-medium"})])],-1),F={scope:"row",class:"py-4"},L={class:"card border-0",style:{"max-width":"540px"}},T={class:"row g-0 align-items-center"},I={class:"col-md-4"},W={class:"ratio ratio-1x1"},z=["src"],H={class:"col-md-8"},X={class:"card-body"},Y={class:"fs-6 card-title text-primary fw-medium"},K={class:"text-start fw-normal"},R={class:"py-4"},G={class:"d-flex justify-content-center"},J=["onClick"],Q=e("i",{class:"bi bi-plus-circle fs-3"},null,-1),Z=[Q],$=["onUpdate:modelValue"],ee=["onClick","disabled"],se=e("i",{class:"bi bi-dash-circle fs-3"},null,-1),te=[se],le={class:"py-4 text-primary"},ie={class:"py-4"},re=["onClick"],ae={class:"fs-5 font-notosans mt-6"},oe=e("br",null,null,-1),de={class:"bg-light py-15"},ne={class:"container text-start"},ce={class:"row justify-content-md-between flex-md-row flex-column mb-8"},me={class:"col-12 col-md-6"},ue=e("h3",{class:"fs-4 fw-medium text-start mb-4"},"顧客資料",-1),he={class:"bg-greyD4 px-8 py-5"},pe=e("h4",{class:"fs-6 my-4"},"已經是會員？登入後更方便管理訂單",-1),_e={class:"d-flex justify-content-between my-5"},be={action:"",class:"text-dark"},fe=e("label",{for:"name",class:"fs-6 mb-1"},"顧客名稱",-1),ve=e("br",null,null,-1),ye=e("label",{for:"email",class:"fs-6 mb-1"},"電子信箱",-1),we=e("br",null,null,-1),xe=e("p",{class:"mb-3 text-end"},"訂單將以此Email通知",-1),De=e("label",{for:"phone",class:"fs-6 mb-1"},"電話號碼",-1),ge=e("br",null,null,-1),ke={class:"col-12 col-md-6 mt-md-0 mt-5 d-flex flex-column"},Ce=e("h3",{class:"fs-4 fw-medium text-start mb-4"},"送貨資料",-1),Ve={class:"bg-greyD4 px-8 py-5 text-dark flex-grow-1"},qe={class:"fs-5 my-4 font-notosans"},Ue=e("label",{for:"data",class:"form-check-label my-4 fs-6 ms-2"},"收件人資料與顧客資料相同",-1),Oe={class:"my-3"},Se=e("label",{for:"recipient",class:"fs-6 mb-1"},"收件人名稱",-1),Ae=e("br",null,null,-1),Ee=e("p",{class:"mb-3 text-end"}," 請填入收件人真實姓名，以確保順利收件 ",-1),Ne=e("label",{for:"recipient-phone",class:"fs-6 mb-1"},"收件人電話號碼",-1),je=e("br",null,null,-1),Me={key:0,for:"recipient-address",class:"fs-6 mb-1"},Pe=e("br",null,null,-1),Be={key:0,class:""},Fe=e("h4",{class:"fs-5 fw-medium py-4 mt-2"},"選擇門市",-1),Le=e("button",{type:"button",class:"btn btn-primary fs-5 p-5 w-100 mb-3"},"搜尋門市",-1),Te=[Fe,Le],Ie={class:"d-flex justify-content-md-between flex-md-row flex-column text-primary"},We={class:"me-5 mt-md-0 mt-5"},ze=e("h3",{class:"fs-4 fw-medium text-start mb-4"},"付款資料",-1),He={class:"bg-greyD4 px-8 py-5"},Xe={class:"fs-6 my-4"},Ye={class:""},Ke={action:"",class:""},Re={class:"form-floating"},Ge=e("label",{for:"Card-number"},"卡號",-1),Je={class:"form-floating"},Qe=e("label",{for:"Card-name"},"持卡人姓名",-1),Ze={class:"form-floating"},$e=e("label",{for:"Card-date"},"有效期限(MM/YY)",-1),es={class:"form-floating"},ss=e("label",{for:"Card-pin"},"安全碼",-1),ts=e("p",{class:"px-2"}," 本金流服務由 SHOPLINE Payments 提供,通過 PCI-DSS 國際信用卡組織最高等級認證,提供安全的交易服務,支援國內外信用卡刷卡。 ",-1),ls={class:"shopRWD mt-md-0 mt-5"},is=e("h3",{class:"fs-4 fw-medium text-start mb-4"},"訂單備註",-1),rs={class:"bg-greyD4 px-8 py-5"},as=e("h4",{class:"fs-5 my-4"},"有什麼要對賣家說的話：",-1),os={action:"",class:"form-floating"},ds={class:"container py-8 text-start text-primary"},ns={class:"row"},cs={class:"col-lg-6 col-12"},ms=e("span",{class:"material-icons fs-5 me-2"}," arrow_back_ios_new ",-1),us=e("span",null,"返回購物車",-1),hs=e("div",{class:"col-lg-6 col-12 p-8"},[e("div",{class:"d-flex mb-4"},[e("input",{type:"checkbox",id:"subscribe",style:{width:"1em",height:"1em"},class:"form-check-input",checked:""}),e("label",{for:"subscribe",class:"form-check-label fs-6 ms-2"},"訂閱最新消息")]),e("div",{class:"d-flex mb-8"},[e("input",{type:"checkbox",id:"private",style:{width:"1em",height:"1em"},class:"form-check-input",required:"",checked:""}),e("label",{for:"private",class:"form-check-label fs-6 ms-2"},[h("本人同意網站"),e("a",{href:"#",class:"underline"},"服務條款"),h(" 及"),e("a",{href:"#",class:"underline"},"隱私權政策")]),h(),e("br"),e("div",{class:"invalid-feedback"},"Example invalid feedback text")]),e("button",{type:"submit",class:"btn btn-primary p-4 fs-4 w-100"},"提交訂單")],-1);function ps(o,i,_s,bs,r,a){const y=_("router-link"),d=_("v-field"),n=_("error-message"),k=_("VForm");return u(),p(w,null,[E,e("div",N,[j,e("div",M,[e("table",P,[B,e("tbody",null,[(u(!0),p(w,null,U(o.carts,s=>(u(),p("tr",{key:s.id},[e("th",F,[e("div",L,[e("div",T,[e("div",I,[e("div",W,[e("img",{src:s.product.imageUrl,class:"img-fluid object-fit-cover",alt:"..."},null,8,z)])]),e("div",H,[e("div",X,[e("h5",Y,m(s.product.title),1),e("small",K,m(s.product.category),1)])])])])]),e("td",R,[e("div",G,[e("button",{class:"btn btn-link text-primary",onClick:[x(t=>s.qty++,["prevent"]),t=>o.updateCart(s)]},Z,8,J),f(e("input",{type:"number",class:"p-2 w-10",min:"1","onUpdate:modelValue":t=>s.qty=t,disabled:""},null,8,$),[[D,s.qty]]),e("button",{class:"btn btn-link text-primary",onClick:[x(t=>s.qty--,["prevent"]),t=>o.updateCart(s)],disabled:s.qty<=1},te,8,ee)])]),e("td",le,"NT$ "+m(parseInt(s.total)),1),e("td",ie,[e("button",{class:"btn btn-primary",onClick:t=>o.deleteCart(s.id)},"刪除",8,re)])]))),128))])]),e("h2",ae,[h(" 合計：NT$"+m(a.total),1),oe,h(" （共"+m(o.carts.length)+"件） ",1)])])]),l(k,{onSubmit:i[8]||(i[8]=s=>a.sendOrder())},{default:b(({errors:s})=>[e("div",de,[e("div",ne,[e("div",ce,[e("div",me,[ue,e("div",he,[pe,e("div",_e,[l(y,{to:"/memberLogin",class:"btn btn-grey66 fs-6 p-5 my-auto w-100"},{default:b(()=>[h("會員登入")]),_:1})]),e("form",be,[fe,ve,l(d,{id:"name",name:"姓名",type:"text",class:c(["form-control p-2 w-100 mb-4 border-0",{"is-invalid":s.姓名}]),placeholder:"請輸入 姓名",rules:"required",modelValue:r.orderData.user.name,"onUpdate:modelValue":i[0]||(i[0]=t=>r.orderData.user.name=t)},null,8,["class","modelValue"]),l(n,{name:"姓名",class:"invalid-feedback"}),ye,we,l(d,{id:"email",name:"Email",type:"email",class:c(["form-control p-2 w-100 mb-4 border-0",{"is-invalid":s.Email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:r.orderData.user.email,"onUpdate:modelValue":i[1]||(i[1]=t=>r.orderData.user.email=t)},null,8,["class","modelValue"]),l(n,{name:"Email",class:"invalid-feedback"}),xe,De,ge,l(d,{id:"phone",name:"電話",type:"tel",class:c(["form-control p-2 w-100 mb-4 border-0",{"is-invalid":s.電話}]),placeholder:"請輸入電話",rules:"required|numeric|min:7",modelValue:r.orderData.user.tel,"onUpdate:modelValue":i[2]||(i[2]=t=>r.orderData.user.tel=t)},null,8,["class","modelValue"]),l(n,{name:"電話",class:"invalid-feedback"})])])]),e("div",ke,[Ce,e("div",Ve,[e("h5",qe,"已選擇的送貨方式："+m(r.orderDeliverData.deliver),1),f(e("input",{type:"checkbox",id:"data",class:"form-check-input my-4","onUpdate:modelValue":i[3]||(i[3]=t=>r.recipientAsOrderData=t)},null,512),[[O,r.recipientAsOrderData]]),Ue,e("form",Oe,[Se,Ae,l(d,{id:"recipient",name:"收件人姓名",type:"text",class:c(["form-control p-2 w-100 mb-4 border-0",{"is-invalid":s.收件人姓名}]),placeholder:"請輸入收件人姓名",rules:"required",modelValue:r.recipient.name,"onUpdate:modelValue":i[4]||(i[4]=t=>r.recipient.name=t),disabled:r.recipientAsOrderData},null,8,["class","modelValue","disabled"]),l(n,{name:"收件人姓名",class:"invalid-feedback"}),Ee,Ne,je,l(d,{id:"recipient-phone",name:"收件人電話",type:"tel",class:c(["form-control p-2 w-100 mb-4 border-0",{"is-invalid":s.收件人電話}]),placeholder:"請輸入收件人電話",rules:"required|numeric|min:7",modelValue:r.recipient.tel,"onUpdate:modelValue":i[5]||(i[5]=t=>r.recipient.tel=t),disabled:r.recipientAsOrderData},null,8,["class","modelValue","disabled"]),l(n,{name:"收件人電話",class:"invalid-feedback"}),a.showAddress()?(u(),p("label",Me,"收件人地址")):v("",!0),Pe,a.showAddress()?(u(),S(d,{key:1,id:"recipient-address",name:"收件人地址",type:"text",class:c(["form-control p-2 w-100 mb-4 border-0",{"is-invalid":s.收件人地址}]),placeholder:"請輸入收件人地址",rules:"required",modelValue:r.recipient.address,"onUpdate:modelValue":i[6]||(i[6]=t=>r.recipient.address=t)},null,8,["class","modelValue"])):v("",!0),l(n,{name:"收件人地址",class:"invalid-feedback"})]),a.showStore()?(u(),p("div",Be,Te)):v("",!0)])])]),e("div",Ie,[e("div",We,[ze,e("div",He,[e("h4",Xe,"已選擇付款方式："+m(r.orderDeliverData.payWay),1),e("div",Ye,[e("form",Ke,[e("div",Re,[l(d,{id:"Card-number",name:"卡號",type:"tel",class:c(["form-control mb-5",{"is-invalid":s.卡號}]),placeholder:"請輸入卡號",rules:a.showCreditCard()?"":"required|numeric|digits:16",disabled:a.showCreditCard()},null,8,["class","rules","disabled"]),l(n,{name:"卡號",class:"invalid-feedback"}),Ge]),e("div",Je,[l(d,{id:"Card-name",name:"持卡人姓名",type:"text",class:c(["form-control mb-5",{"is-invalid":s.持卡人姓名}]),placeholder:"請輸入持卡人姓名",rules:a.showCreditCard()?"":"required",disabled:a.showCreditCard()},null,8,["class","rules","disabled"]),l(n,{name:"持卡人姓名",class:"invalid-feedback"}),Qe]),e("div",Ze,[l(d,{id:"Card-date",name:"有效期限",type:"text",class:c(["form-control mb-5",{"is-invalid":s.有效期限}]),placeholder:"請輸入有效期限",rules:a.showCreditCard()?"":"required|numeric|digits:4",disabled:a.showCreditCard()},null,8,["class","rules","disabled"]),l(n,{name:"有效期限",class:"invalid-feedback"}),$e]),e("div",es,[l(d,{id:"Card-pin",name:"安全碼",type:"text",class:c(["form-control mb-5",{"is-invalid":s.安全碼}]),placeholder:"請輸入安全碼",rules:a.showCreditCard()?"":"required|numeric|digits:3",disabled:a.showCreditCard()},null,8,["class","rules","disabled"]),l(n,{name:"安全碼",class:"invalid-feedback"}),ss])]),ts])])]),e("div",ls,[is,e("div",rs,[as,e("form",os,[f(e("textarea",{name:"",id:"",rows:"15",class:"mb-4 w-100 no-resize border-0","onUpdate:modelValue":i[7]||(i[7]=t=>r.orderData.message=t)},null,512),[[D,r.orderData.message]])])])])])])]),e("div",ds,[e("div",ns,[e("div",cs,[l(y,{to:"/cart",class:"d-flex align-items-center p-8 fs-5 fw-medium text-primary"},{default:b(()=>[ms,us]),_:1})]),hs])])]),_:1})],64)}const ws=C(A,[["render",ps]]);export{ws as default};
