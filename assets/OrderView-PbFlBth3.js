import{_ as M,m as P,a as N,c as h,b as e,F as V,r as T,e as _,t as p,d as i,w as y,l as U,j as f,o as m,g as v,v as S,n as u,S as E,i as g,x as q,f as I,p as R,k as j}from"./index-fOpr-nR3.js";import{c as A}from"./cartStore-DPTuHXak.js";import{M as z}from"./modal-BFcgb3gR.js";import{S as B}from"./sweetalert2.all-BRrQw1Rc.js";import"./selector-engine-DrhGaR0l.js";var G={VITE_APP_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_API_NAME:"greensheep",VITE_LINE_CLIENT_ID:"x9iTcS6m9Fdlz8XFfAbkqs",VITE_LINE_CLIENT_SECRET:"iGiOLRLmU2aNTDuObVQlcP5XzPYSbUzJ9gvUl4YvPzx",BASE_URL:"/greensheep/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:F,VITE_APP_API_NAME:Y}=G,W={data(){return{agree:!1,recipientAsOrderData:!1,recipient:{name:"",tel:"",address:""},orderData:{user:{name:"",email:"",tel:"",address:""},message:"",birthday:""},orderDeliverData:{},policy:{DOCState:!0,Modal:"",Check:!1}}},methods:{...P(A,["getCarts","updateCart","deleteCart"]),showAddress(){if(this.orderDeliverData.deliver==="中華郵政"||this.orderDeliverData.deliver==="黑貓宅急便"||this.orderDeliverData.deliver==="宅配通"||this.orderDeliverData.deliver==="UPS"||this.orderDeliverData.deliver==="DHL")return!0},showStore(){if(this.orderDeliverData.deliver==="7-11取貨"||this.orderDeliverData.deliver==="全家取貨"||this.orderDeliverData.deliver==="OK取貨"||this.orderDeliverData.deliver==="萊爾富取貨")return!0},showCreditCard(){return this.orderDeliverData.payWay!=="信用卡"},sendOrder(){if(this.carts.length===0){B.fire({title:"購物車是空的",confirmButtonColor:"#566B5A",icon:"warning"});return}this.showStore()&&(this.recipient.address=`${this.orderDeliverData.deliver} ...店`),this.orderData.user.name=this.recipient.name,this.orderData.user.tel=this.recipient.tel,this.orderData.user.address=this.recipient.address;const d=`${F}/api/${Y}/order`;this.$http.post(d,{data:this.orderData}).then(()=>{this.getCarts(),this.$router.push("/success")}).catch(l=>{console.log(l)})},checkLogin(){let d=localStorage.getItem("userInfo");const l="https://greensheep-json-server.onrender.com/users";if(d){const D=JSON.parse(d).id;this.$http.get(l).then(b=>{b.data.forEach(t=>{t.id===D&&(this.orderData.user.name=t.nickName,this.orderData.user.email=t.email,this.orderData.user.tel=t.phone,this.orderData.user.address=t.location)})}).catch(b=>{console.log(b)})}},openModal(d){d==="條款"?this.policy.DOCState=!0:this.policy.DOCState=!1,this.policy.Modal.show()}},computed:{...N(A,["carts","deliverData","total","isLoading"])},watch:{recipientAsOrderData(d){d&&(this.recipient.name=this.orderData.user.name,this.recipient.tel=this.orderData.user.tel,this.recipient.address=this.orderData.user.address)}},mounted(){this.policy.Modal=new z(this.$refs.policyModal),this.orderDeliverData={...this.deliverData},this.checkLogin()}},s=d=>(R("data-v-fd294c95"),d=d(),j(),d),H={class:"container py-20 pt-40"},J=U('<div data-v-fd294c95><div class="p-10 d-flex justify-content-center" style="z-index:10;" data-v-fd294c95><div class="" data-v-fd294c95><div class="btn btn-outline-primary border-2 rounded-circle bg-primary pe-none" data-v-fd294c95><i class="bi bi-check-lg fs-2 text-light" data-v-fd294c95></i></div><p class="mt-3 fs-6 text-primary" data-v-fd294c95>確認購買明細</p></div><div class="mt-5 bg-primary border border-greyD4" style="height:8px;width:35%;" data-v-fd294c95></div><div class="" data-v-fd294c95><div class="btn btn-outline-primary border-2 rounded-circle bg-primary pe-none" data-v-fd294c95><i class="bi bi-check-lg fs-2 text-light" data-v-fd294c95></i></div><p class="mt-3 fs-6 text-primary" data-v-fd294c95>付款資料填寫</p></div><div class="mt-5 bg-light border border-greyD4" style="height:8px;width:35%;" data-v-fd294c95></div><div class="opacity-50" data-v-fd294c95><div class="btn btn-outline-primary border-2 rounded-circle pe-none" data-v-fd294c95><i class="bi bi-check-lg fs-2 text-primary" data-v-fd294c95></i></div><p class="mt-3 fs-6 text-primary" data-v-fd294c95>訂單完成</p></div></div></div>',1),X={class:"cart-table list-unstyled border-lg-bottom border-primary"},K=U('<li class="cart-thead" data-v-fd294c95><ol class="list-unstyled cart-tr" data-v-fd294c95><li class="text-primary fw-medium" data-v-fd294c95></li><li class="text-primary fw-medium" data-v-fd294c95>商品資訊</li><li class="text-primary fw-medium" data-v-fd294c95>數量</li><li class="text-primary fw-medium" data-v-fd294c95>單價</li><li class="text-primary fw-medium" data-v-fd294c95>價格</li></ol></li>',1),Q={class:"list-unstyled cart-tr"},Z={class:"w-md-10"},$=["src"],ee={class:"w-md-30"},se={class:"fs-6 card-title text-primary fw-medium"},te={class:"w-md-30"},le={class:"d-flex justify-content-center"},ie=["onUpdate:modelValue"],ae={"data-title":"單價",class:"cart-price text-primary w-md-15"},de={class:"text-center"},oe={c:"","data-title":"價格",class:"cart-price text-primary w-md-15"},re={class:"text-center fw-medium d-inline-block"},ne={class:"fs-5 font-notosans mt-6"},ce=s(()=>e("br",null,null,-1)),me={class:"bg-light py-15"},ue={class:"container text-start"},he={class:"row justify-content-md-between flex-md-row flex-column mb-8"},_e={class:"col-12 col-md-6"},pe=s(()=>e("h3",{class:"fs-4 fw-medium text-start mb-4"},"顧客資料",-1)),fe={class:"bg-greyD4 px-8 py-5"},be=s(()=>e("h4",{class:"fs-6 my-4"},"已經是會員？登入後更方便管理訂單",-1)),ve={class:"d-flex justify-content-between my-5"},ye={action:"",class:"text-dark"},ge={class:"mb-4"},De=s(()=>e("label",{for:"name",class:"fs-6 mb-1"},"顧客名稱",-1)),xe=s(()=>e("br",null,null,-1)),we=s(()=>e("label",{for:"email",class:"fs-6 mb-1"},"電子信箱",-1)),ke=s(()=>e("br",null,null,-1)),Ce={class:"mb-4"},Ve=s(()=>e("p",{class:"mb-3 text-end"},"訂單將以此Email通知",-1)),Se=s(()=>e("label",{for:"phone",class:"fs-6 mb-1"},"電話號碼",-1)),Ee=s(()=>e("br",null,null,-1)),Ie={class:"mb-4"},Ae={class:"col-12 col-md-6 mt-md-0 mt-5 d-flex flex-column"},Ue=s(()=>e("h3",{class:"fs-4 fw-medium text-start mb-4"},"送貨資料",-1)),Le={class:"bg-greyD4 px-8 py-5 text-dark flex-grow-1"},Oe={class:"fs-5 my-4 font-notosans"},Me=s(()=>e("label",{for:"data",class:"form-check-label my-4 fs-6 ms-2"},"收件人資料與顧客資料相同",-1)),Pe={class:"my-3"},Ne={class:"mb-4"},Te=s(()=>e("label",{for:"recipient",class:"fs-6 mb-1"},"收件人名稱",-1)),qe=s(()=>e("br",null,null,-1)),Re=s(()=>e("p",{class:"mb-3 text-end"},"請填入收件人真實姓名，以確保順利收件",-1)),je=s(()=>e("label",{for:"recipient-phone",class:"fs-6 mb-1"},"收件人電話號碼",-1)),ze=s(()=>e("br",null,null,-1)),Be={class:"mb-4"},Ge={key:0,for:"recipient-address",class:"fs-6 mb-1"},Fe=s(()=>e("br",null,null,-1)),Ye={class:"mb-4"},We={key:0,class:""},He=s(()=>e("h4",{class:"fs-5 fw-medium py-4 mt-2"},"選擇門市",-1)),Je=s(()=>e("button",{type:"button",class:"btn btn-primary fs-5 p-5 w-100 mb-3"},"搜尋門市",-1)),Xe=[He,Je],Ke={class:"d-flex justify-content-md-between flex-md-row flex-column text-primary"},Qe={class:"me-5 mt-md-0 mt-5"},Ze=s(()=>e("h3",{class:"fs-4 fw-medium text-start mb-4"},"付款資料",-1)),$e={class:"bg-greyD4 px-8 py-5"},es={class:"fs-6 my-4"},ss={class:""},ts={action:"",class:""},ls={class:"form-floating"},is=s(()=>e("label",{for:"Card-number"},"卡號",-1)),as={class:"form-floating"},ds=s(()=>e("label",{for:"Card-name"},"持卡人姓名",-1)),os={class:"form-floating"},rs=s(()=>e("label",{for:"Card-date"},"有效期限(MM/YY)",-1)),ns={class:"form-floating"},cs=s(()=>e("label",{for:"Card-pin"},"安全碼",-1)),ms=s(()=>e("p",{class:"px-2"}," 本金流服務由 SHOPLINE Payments 提供,通過 PCI-DSS 國際信用卡組織最高等級認證,提供安全的交易服務,支援國內外信用卡刷卡。 ",-1)),us={class:"shopRWD mt-md-0 mt-5"},hs=s(()=>e("h3",{class:"fs-4 fw-medium text-start mb-4"},"訂單備註",-1)),_s={class:"bg-greyD4 px-8 py-5"},ps=s(()=>e("h4",{class:"fs-5 my-4"},"有什麼要對賣家說的話：",-1)),fs={action:"",class:"form-floating"},bs={class:"container py-8 text-start text-primary"},vs={class:"row"},ys={class:"col-lg-6 col-12"},gs=s(()=>e("span",{class:"material-icons fs-5 me-2"}," arrow_back_ios_new ",-1)),Ds=s(()=>e("span",null,"返回購物車",-1)),xs={class:"col-lg-6 col-12 p-8"},ws=s(()=>e("div",{class:"d-flex mb-4"},[e("input",{type:"checkbox",id:"subscribe",style:{width:"1em",height:"1em"},class:"form-check-input",checked:""}),e("label",{for:"subscribe",class:"form-check-label fs-6 ms-2"},"訂閱最新消息")],-1)),ks={class:"d-flex mb-8"},Cs={for:"private",class:"form-check-label fs-6 ms-2"},Vs=s(()=>e("br",null,null,-1)),Ss=s(()=>e("div",{class:"invalid-feedback"},"Example invalid feedback text",-1)),Es=["disabled"],Is={class:"modal fade",id:"policyModal",tabindex:"-1","aria-labelledby":"policyModalLabel","aria-hidden":"true",ref:"policyModal"},As={class:"modal-dialog"},Us={class:"modal-content"},Ls={class:"modal-header"},Os={key:0,class:"modal-title fs-5"},Ms={key:1,class:"modal-title fs-5"},Ps=s(()=>e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),Ns={class:"modal-body text-start"},Ts={key:0,class:"p-4"},qs=s(()=>e("p",null," 歡迎光臨GreenSheep！我們是一個專注於提供精美飾品的電子商務平台。在使用本網站前，請詳細閱讀以下條款，使用本網站即表示您同意遵守以下規定。 ",-1)),Rs=s(()=>e("br",null,null,-1)),js=s(()=>e("ul",null,[e("li",null," 使用條款：您同意僅以合法目的使用本網站，不得從事任何違法或損害他人權益的活動。 "),e("li",null," 責任限制：GreenSheep對於因使用本網站而引起的任何直接、間接、附帶或特別的損失不承擔責任。 "),e("li",null," 商品信息：我們努力確保在網站上提供的所有商品信息準確無誤，但不能保證所有信息都是完整和最新的。 "),e("li",null,"使用者責任：您應對您的帳戶和密碼保密，並對在您的帳戶下的所有活動負責。"),e("li",null," 知識產權：本網站上的所有內容，包括但不限於文字、圖像、標誌，均受版權和商標法保護。 "),e("li",null,"其他條款：本條款未涉及的其他問題，將遵循GreenSheep的一般業務實踐和標準。")],-1)),zs={key:1,class:"p-4"},Bs=s(()=>e("p",null," 歡迎您使用GreenSheep網站服務。我們非常重視您的隱私保護，並承諾保護您提供的個人信息。請您在使用本網站前仔細閱讀以下隱私條款內容： ",-1)),Gs=s(()=>e("br",null,null,-1)),Fs=s(()=>e("ul",null,[e("li",null," 收集信息：當您註冊帳戶、下訂單或與我們聯繫時，我們可能收集您的姓名、聯繫方式、郵寄地址等個人信息。 "),e("li",null," 信息用途：我們收集的信息將用於處理訂單、提供客戶服務、改善網站體驗以及向您發送促銷活動和產品信息。 "),e("li",null," 信息保護：我們採取合理的安全措施來保護您的個人信息，防止未經授權的訪問、使用或泄露。 "),e("li",null," 信息分享：我們不會未經您的同意將您的個人信息分享給第三方，除非為了履行訂單或遵守法律法規的要求。 "),e("li",null," Cookie使用：我們可能使用Cookie技術收集和存儲有關您訪問本網站的信息，以改善您的網站體驗。 "),e("li",null,"隱私政策更新：我們保留隨時更新隱私條款的權利，更新後的條款將在本網站上發布。")],-1)),Ys=s(()=>e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"關閉")],-1));function Ws(d,l,D,b,t,r){var w,k,C;const x=f("RouterLink"),n=f("v-field"),c=f("error-message"),L=f("VForm"),O=f("VueLoading");return m(),h(V,null,[e("div",H,[J,e("ul",X,[K,(m(!0),h(V,null,T(d.carts,o=>(m(),h("li",{key:o.id,class:"cart-tbody"},[e("ol",Q,[e("li",Z,[e("img",{src:o.product.imageUrl,class:"cart-img img-fluid object-fit-cover",alt:"product-image"},null,8,$)]),e("li",ee,[e("h5",se,p(o.product.title),1)]),e("li",te,[e("div",le,[v(e("input",{type:"number",class:"p-lg-2 w-20 text-center",min:"1","onUpdate:modelValue":a=>o.qty=a,disabled:""},null,8,ie),[[S,o.qty]])])]),e("li",ae,[e("small",de,"NT$ "+p(o.product.price),1)]),e("li",oe,[e("p",re,"NT$ "+p(parseInt(o.total)),1)])])]))),128)),e("h2",ne,[_(" 合計：NT $"+p((w=d.carts[0])!=null&&w.coupon?d.total-((C=(k=d.carts[0])==null?void 0:k.coupon)==null?void 0:C.discount_price):d.total),1),ce,_(" （共 "+p(d.carts.length)+" 件） ",1)])])]),i(L,{onSubmit:l[11]||(l[11]=o=>r.sendOrder())},{default:y(({errors:o})=>[e("div",me,[e("div",ue,[e("div",he,[e("div",_e,[pe,e("div",fe,[be,e("div",ve,[i(x,{to:"/memberLogin",class:"btn btn-grey66 fs-6 p-5 my-auto w-100"},{default:y(()=>[_("會員登入")]),_:1})]),e("form",ye,[e("div",ge,[De,xe,i(n,{id:"name",name:"姓名",type:"text",class:u(["form-control p-2 w-100 mb-1 border-0",{"is-invalid":o.姓名}]),placeholder:"請輸入 姓名",rules:"required",modelValue:t.orderData.user.name,"onUpdate:modelValue":l[0]||(l[0]=a=>t.orderData.user.name=a)},null,8,["class","modelValue"]),i(c,{name:"姓名",class:"invalid-feedback"})]),we,ke,e("div",Ce,[i(n,{id:"email",name:"Email",type:"email",class:u(["form-control p-2 w-100 mb-1 border-0",{"is-invalid":o.Email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:t.orderData.user.email,"onUpdate:modelValue":l[1]||(l[1]=a=>t.orderData.user.email=a)},null,8,["class","modelValue"]),i(c,{name:"Email",class:"invalid-feedback"}),Ve]),Se,Ee,e("div",Ie,[i(n,{id:"phone",name:"電話",type:"tel",class:u(["form-control p-2 w-100 mb-1 border-0",{"is-invalid":o.電話}]),placeholder:"請輸入電話",rules:"required|numeric|min:7",modelValue:t.orderData.user.tel,"onUpdate:modelValue":l[2]||(l[2]=a=>t.orderData.user.tel=a)},null,8,["class","modelValue"]),i(c,{name:"電話",class:"invalid-feedback"})])])])]),e("div",Ae,[Ue,e("div",Le,[e("h5",Oe," 已選擇的送貨方式："+p(t.orderDeliverData.deliver),1),v(e("input",{type:"checkbox",id:"data",class:"form-check-input my-4","onUpdate:modelValue":l[3]||(l[3]=a=>t.recipientAsOrderData=a)},null,512),[[E,t.recipientAsOrderData]]),Me,e("form",Pe,[e("div",Ne,[Te,qe,i(n,{id:"recipient",name:"收件人姓名",type:"text",class:u(["form-control p-2 w-100 mb-1 border-0",{"is-invalid":o.收件人姓名}]),placeholder:"請輸入收件人姓名",rules:"required",modelValue:t.recipient.name,"onUpdate:modelValue":l[4]||(l[4]=a=>t.recipient.name=a),disabled:t.recipientAsOrderData},null,8,["class","modelValue","disabled"]),i(c,{name:"收件人姓名",class:"invalid-feedback"}),Re]),je,ze,e("div",Be,[i(n,{id:"recipient-phone",name:"收件人電話",type:"tel",class:u(["form-control p-2 w-100 mb-1 border-0",{"is-invalid":o.收件人電話}]),placeholder:"請輸入收件人電話",rules:"required|numeric|min:7",modelValue:t.recipient.tel,"onUpdate:modelValue":l[5]||(l[5]=a=>t.recipient.tel=a),disabled:t.recipientAsOrderData},null,8,["class","modelValue","disabled"]),i(c,{name:"收件人電話",class:"invalid-feedback"})]),r.showAddress()?(m(),h("label",Ge,"收件人地址")):g("",!0),Fe,e("div",Ye,[r.showAddress()?(m(),q(n,{key:0,id:"recipient-address",name:"收件人地址",type:"text",class:u(["form-control p-2 w-100 mb-1 border-0",{"is-invalid":o.收件人地址}]),placeholder:"請輸入收件人地址",rules:"required",modelValue:t.recipient.address,"onUpdate:modelValue":l[6]||(l[6]=a=>t.recipient.address=a)},null,8,["class","modelValue"])):g("",!0),i(c,{name:"收件人地址",class:"invalid-feedback"})])]),r.showStore()?(m(),h("div",We,Xe)):g("",!0)])])]),e("div",Ke,[e("div",Qe,[Ze,e("div",$e,[e("h4",es,"已選擇付款方式："+p(t.orderDeliverData.payWay),1),e("div",ss,[e("form",ts,[e("div",ls,[i(n,{id:"Card-number",name:"卡號",type:"tel",class:u(["form-control mb-2",{"is-invalid":o.卡號}]),placeholder:"請輸入卡號",rules:r.showCreditCard()?"":"required|numeric|digits:16",disabled:r.showCreditCard()},null,8,["class","rules","disabled"]),i(c,{name:"卡號",class:"invalid-feedback mb-2"}),is]),e("div",as,[i(n,{id:"Card-name",name:"持卡人姓名",type:"text",class:u(["form-control mb-2",{"is-invalid":o.持卡人姓名}]),placeholder:"請輸入持卡人姓名",rules:r.showCreditCard()?"":"required",disabled:r.showCreditCard()},null,8,["class","rules","disabled"]),i(c,{name:"持卡人姓名",class:"invalid-feedback mb-2"}),ds]),e("div",os,[i(n,{id:"Card-date",name:"有效期限",type:"text",class:u(["form-control mb-2",{"is-invalid":o.有效期限}]),placeholder:"請輸入有效期限",rules:r.showCreditCard()?"":"required|numeric|digits:4",disabled:r.showCreditCard()},null,8,["class","rules","disabled"]),i(c,{name:"有效期限",class:"invalid-feedback mb-2"}),rs]),e("div",ns,[i(n,{id:"Card-pin",name:"安全碼",type:"text",class:u(["form-control mb-2",{"is-invalid":o.安全碼}]),placeholder:"請輸入安全碼",rules:r.showCreditCard()?"":"required|numeric|digits:3",disabled:r.showCreditCard()},null,8,["class","rules","disabled"]),i(c,{name:"安全碼",class:"invalid-feedback mb-2"}),cs])]),ms])])]),e("div",us,[hs,e("div",_s,[ps,e("form",fs,[v(e("textarea",{name:"",id:"",rows:"15",class:"mb-4 w-100 no-resize border-0","onUpdate:modelValue":l[7]||(l[7]=a=>t.orderData.message=a)},null,512),[[S,t.orderData.message]])])])])])])]),e("div",bs,[e("div",vs,[e("div",ys,[i(x,{to:"/cart",class:"d-flex align-items-center p-8 fs-5 fw-medium text-primary"},{default:y(()=>[gs,Ds]),_:1})]),e("div",xs,[ws,e("div",ks,[v(e("input",{type:"checkbox",id:"private",style:{width:"1em",height:"1em"},class:"form-check-input","onUpdate:modelValue":l[8]||(l[8]=a=>t.agree=a)},null,512),[[E,t.agree]]),e("label",Cs,[_("本人同意網站 "),e("a",{class:"text-decoration-underline",onClick:l[9]||(l[9]=I(a=>r.openModal("條款"),["prevent"]))},"網站服務條款"),_(" 及 "),e("a",{class:"text-decoration-underline",onClick:l[10]||(l[10]=I(a=>r.openModal("政策"),["prevent"]))},"隱私權政策")]),Vs,Ss]),e("button",{type:"submit",class:"btn btn-primary p-4 fs-4 w-100",disabled:!t.agree}," 提交訂單 ",8,Es)])])])]),_:1}),e("div",Is,[e("div",As,[e("div",Us,[e("div",Ls,[t.policy.DOCState?(m(),h("h1",Os,"網站服務條款")):(m(),h("h1",Ms,"隱私權政策")),Ps]),e("div",Ns,[t.policy.DOCState?(m(),h("div",Ts,[qs,Rs,js,_(" 感謝您選擇GreenSheep作為您購買飾品的平台，我們將竭盡所能為您提供最佳的購物體驗！ ")])):(m(),h("div",zs,[Bs,Gs,Fs,_(" 使用GreenSheep即表示您同意本隱私條款的條件和規定。如果您對此有任何疑問或需要進一步說明，請隨時聯繫我們。 ")]))]),Ys])])],512),i(O,{active:d.isLoading},null,8,["active"])],64)}const Zs=M(W,[["render",Ws],["__scopeId","data-v-fd294c95"]]);export{Zs as default};
