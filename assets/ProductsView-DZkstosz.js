import{p as x}from"./productStore-DiwbwaP0.js";import{c as S}from"./cartStore-D6w8RGkB.js";import{l as w}from"./likeStore-DpYBsglY.js";import{S as D}from"./SwiperImages-BIGeKccG.js";import{_ as I,a as v,m as f,c as i,d as h,w as d,b as t,F as g,r as k,t as a,f as l,i as p,n as m,j as _,o,e as C,x as T,p as N,k as V}from"./index-SYHPK7Jv.js";import"./sweetalert2.all-CYmlyNIM.js";import"./navigation-BoASVWTd.js";const H={props:{id:{type:String,required:!0}},data(){return{isShow:!1,sortTitle:"",isBlock:!0,isList:!1,searchWord:"",currentCategory:"",currentProductsPage:1,currentSearchWord:""}},components:{SwiperImages:D},computed:{...v(x,["products","categoryProducts","currentProducts","currentPage","category","categories","showTitle","isLoading","loadingStatus"]),...v(w,["isLike","likedProducts"])},watch:{$route(){this.currentCategory=this.$route.params.category,this.searchWord=this.$route.query.keyword,this.currentProductsPage=1,this.getFilterProducts(this.currentCategory,1,this.sortTitle,this.searchWord),this.likeInit()},currentProductsPage(){this.changeCurrentPage(),this.likeInit()}},methods:{...f(x,["getProducts","getFilterProducts","getSort"]),...f(S,["addToCart"]),...f(w,["likeInit","addToLike","isLogin"]),changeCategory(s){this.currentCategory=s,this.currentProductsPage=1,this.getFilterProducts(this.currentCategory,1)},changeCurrentPage(){this.getFilterProducts(this.currentCategory,this.currentProductsPage)},toggleDisplay(s){this.likeInit(),s==="isBlock"?(this.isBlock=!0,this.isList=!1):s==="isList"&&(this.isBlock=!1,this.isList=!0)},sort(s){this.isShow=!1,this.sortTitle=s,this.getFilterProducts(this.currentCategory,this.currentProductsPage,s)},async fetchData(){await this.getProducts(),this.currentCategory=this.$route.params.category,this.searchWord=this.$route.query.keyword,this.getFilterProducts(this.currentCategory,1,"timeN2O",this.searchWord)}},async mounted(){await this.fetchData(),this.likeInit()}},c=s=>(N("data-v-ea47c17c"),s=s(),V(),s),M=c(()=>t("img",{src:"https://images.unsplash.com/photo-1512163143273-bde0e3cc7407?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80",alt:"swiperImage"},null,-1)),W=c(()=>t("img",{src:"https://images.unsplash.com/photo-1450297166380-cabe503887e5?q=80&w=1730&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"swiperImage"},null,-1)),j=c(()=>t("img",{src:"https://images.unsplash.com/photo-1514927465065-bbdc86c7a76c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80",alt:"swiperImage"},null,-1)),F={class:"container"},G={class:"row py-7 py-lg-10"},A={class:"d-none d-lg-block col-lg-2 h-bottom-line"},$={class:"d-none d-md-block list-unstyled text-dark text-start"},q={class:"col-lg-10 py-2"},U={class:"d-flex justify-content-between mb-5"},z={"aria-label":"breadcrumb"},O={class:"breadcrumb"},Y={class:"breadcrumb-item"},R={class:"breadcrumb-item"},E={class:"breadcrumb-item active"},J={class:"mb-3 position-relative"},K={key:0,class:"sort-list border border-primary bg-white rounded-2 text-primary list-unstyled position-absolute top-100 end-0 z-3",style:{width:"200px"}},Q=c(()=>t("i",{class:"bi bi-list fs-5"},null,-1)),X=[Q],Z=c(()=>t("i",{class:"bi bi-grid-3x2-gap-fill fs-5"},null,-1)),tt=[Z],et={class:"text-end text-primary mb-5"},st={key:0,class:"row row-cols-2 row-cols-lg-4 gx-4 gy-6 mb-10 mb-lg-20"},ot={class:"h-border position-relative",style:{width:"100%","padding-top":"100%"}},it={key:0,class:"position-absolute start-0 bottom-0 z-1 bg-deco p-1 text-dark fs-8"},rt=["src"],nt=["src"],at={class:"card-body text-start d-flex flex-column"},ct={class:"card-title flex-grow-1 display-7 text-dark my-2"},lt={key:0,class:"card-text display-8 text-primary mt-3 mb-6"},dt={key:1,class:"mt-3 mb-1"},ut={class:"card-text display-8 text-primary my-2 me-2"},pt=c(()=>t("br",null,null,-1)),ht={class:"card-text display-8 text-grey9F text-decoration-line-through"},gt={class:"d-flex gap-2"},mt=["onClick"],bt=["id"],_t=["onClick"],yt=c(()=>t("i",{class:"bi bi-bag-check fs-6"},null,-1)),ft=[yt],kt={class:"container"},xt={key:0,class:"table mb-10 mb-lg-15"},wt={class:"product-item row mb-3 bg-white rounded-3 align-content-center py-2 py-lg-1"},vt={class:"col-5 col-md-3 my-auto px-4 py-4 border-bottom-0"},Ct=["src","alt"],Pt={class:"col-7 col-md-9 row flex-wrap justify-content-between"},Lt={class:"col-12 col-md-4 mb-3 my-md-auto"},Bt={key:0,class:"bg-primary text-white py-1 px-2 rounded-pill fs-9 float-end"},St={class:"card-title display-6 text-dark"},Dt={key:0,class:"col-12 col-md-auto my-md-auto"},It={class:"card-text fs-7 text-dark"},Tt={key:1,class:"col-12 col-md-auto my-auto"},Nt={key:0,class:"card-text fs-8 bg-deco py-1 px-1 me-2"},Vt={class:"d-inline-block card-text fs-7 text-dark mb-2"},Ht=c(()=>t("br",null,null,-1)),Mt={class:"d-inline-block card-text display-8 text-grey9F text-decoration-line-through"},Wt={class:"col-12 col-md-3 my-md-auto d-flex gap-2"},jt=["onClick"],Ft=["id"],Gt=["onClick"],At=c(()=>t("i",{class:"bi bi-bag-check fs-6"},null,-1)),$t=[At],qt={key:1},Ut={class:"text-dark text-center"},zt={key:2},Ot={class:"text-dark text-center"},Yt={key:3,class:"text-center va-pagination"},Rt=c(()=>t("span",{class:"material-icons fs-8 p-1"}," navigate_before ",-1)),Et=c(()=>t("span",{class:"material-icons fs-8 p-1"}," navigate_next ",-1)),Jt={key:4,class:"d-flex justify-content-center align-items-center",style:{"min-height":"360px"}},Kt=c(()=>t("div",{class:"spinner-border",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")],-1)),Qt=[Kt];function Xt(s,r,Zt,te,n,u){const P=_("SwiperImages"),b=_("RouterLink"),L=_("vue-awesome-paginate"),B=_("VueLoading");return o(),i(g,null,[h(P,null,{firstImage:d(()=>[M]),secondImage:d(()=>[W]),thirdImage:d(()=>[j]),_:1}),t("main",F,[t("div",G,[t("aside",A,[t("ul",$,[(o(!0),i(g,null,k(s.categories,e=>(o(),i("li",{key:e},[h(b,{to:{path:`/products/${e}`},class:m(["d-inline-block py-2 mx-3 position-relative cursor-pointer",{active:this.$route.path===`/products/${e}`}])},{default:d(()=>[C(a(e),1)]),_:2},1032,["to","class"])]))),128))])]),t("div",q,[t("div",U,[t("nav",z,[t("ol",O,[t("li",Y,[h(b,{to:"/"},{default:d(()=>[C("首頁")]),_:1})]),t("li",R,[t("a",{class:"cursor-pointer",onClick:r[0]||(r[0]=e=>u.changeCategory("全部商品 ALL"))},"商品")]),t("li",E,a(n.currentCategory),1)])]),t("div",J,[t("a",{href:"#",class:"btn fs-8 border border-primary btn-md text-primary py-2 px-3 float-end align-middle",onClick:r[1]||(r[1]=l(e=>n.isShow=!n.isShow,["prevent"]))},"排序"),n.isShow===!0?(o(),i("ul",K,[t("li",{class:"px-4 py-2 border-bottom border-primary cursor-pointer",onClick:r[2]||(r[2]=l(e=>u.sort("priceL2H"),["prevent"]))}," 價格 由低至高 "),t("li",{class:"px-4 py-2 border-bottom border-primary cursor-pointer",onClick:r[3]||(r[3]=l(e=>u.sort("priceH2L"),["prevent"]))}," 價格 由高至低 "),t("li",{class:"px-4 py-2 border-bottom border-primary cursor-pointer",onClick:r[4]||(r[4]=l(e=>u.sort("timeN2O"),["prevent"]))}," 上架時間 由新到舊 "),t("li",{class:"px-4 py-2 cursor-pointer",onClick:r[5]||(r[5]=l(e=>u.sort("timeO2N"),["prevent"]))}," 上架時間 由舊到新 ")])):p("",!0),t("a",{href:"#",class:m(["btn border border-primary btn-md text-primary me-2 me-md-4 py-1 px-2 float-end",[{"bg-primary":n.isList},{"text-white":n.isList}]]),onClick:r[6]||(r[6]=l(e=>u.toggleDisplay("isList"),["prevent"]))},X,2),t("a",{href:"#",class:m(["btn border border-primary btn-md text-primary me-2 me-md-4 py-1 px-2 float-end",[{"bg-primary":n.isBlock},{"text-white":n.isBlock}]]),onClick:r[7]||(r[7]=l(e=>u.toggleDisplay("isBlock"),["prevent"]))},tt,2)])]),t("p",et,"排序方式："+a(s.showTitle),1),s.currentProducts.length!==0?(o(),i(g,{key:0},[n.isBlock===!0?(o(),i("div",st,[(o(!0),i(g,null,k(s.currentProducts,e=>(o(),i("li",{class:"col list-unstyled d-flex",key:e.id},[h(b,{to:{path:`/products/detail/${e.id}`},class:"card border-0 flex-grow-1"},{default:d(()=>[t("div",ot,[e.discount!==10?(o(),i("span",it,a(e.discount)+"折",1)):p("",!0),t("img",{src:e.imageUrl,class:"show position-absolute top-0 start-0 w-100 h-100 object-fit-cover"},null,8,rt),t("img",{src:e.imageUrl2,class:"change position-absolute top-0 start-0 w-100 h-100 object-fit-cover"},null,8,nt)]),t("div",at,[t("h5",ct,a(e.title),1),e.origin_price===e.price?(o(),i("p",lt," NT$ "+a(e.origin_price),1)):(o(),i("div",dt,[t("span",ut,"NT$ "+a(e.price),1),pt,t("span",ht," NT$ "+a(e.origin_price),1)])),t("div",gt,[t("button",{type:"button",class:"custom-btn custom-btn-secondary text-center w-100 border-1 add-to-cart",onClick:l(y=>s.isLogin(e.id),["prevent"])},[t("i",{class:m(["bi fs-5",s.likedProducts.includes(e.id)?"bi-heart-fill":"bi-heart"]),id:e.id},null,10,bt)],8,mt),t("button",{type:"button",class:"custom-btn custom-btn-toGreen text-center w-100 border-1 add-to-cart",onClick:l(y=>s.addToCart(e.id),["prevent"])},ft,8,_t)])])]),_:2},1032,["to"])]))),128))])):p("",!0),t("div",kt,[n.isList===!0?(o(),i("table",xt,[t("tbody",null,[(o(!0),i(g,null,k(s.currentProducts,e=>(o(),T(b,{key:e.id,to:{path:`/products/detail/${e.id}`}},{default:d(()=>[t("tr",wt,[t("th",vt,[t("img",{src:e.imageUrl,class:"list-img img-fluid rounded object-fit-cover",alt:e.title},null,8,Ct)]),t("div",Pt,[t("td",Lt,[e.highLight?(o(),i("span",Bt,"主打")):p("",!0),t("h5",St,a(e.title),1)]),e.origin_price===e.price?(o(),i("td",Dt,[t("p",It,"NT $"+a(e.origin_price),1)])):(o(),i("td",Tt,[e.discount!==10?(o(),i("span",Nt,a(e.discount)+"折",1)):p("",!0),t("span",Vt,"NT$ "+a(e.price),1),Ht,t("span",Mt," NT$ "+a(e.origin_price),1)])),t("td",Wt,[t("button",{type:"button",class:"custom-btn custom-btn-secondary text-center w-60 w-lg-100 border-1 add-to-cart",onClick:l(y=>s.isLogin(e.id),["prevent"])},[t("i",{class:m(["bi fs-5",[s.likedProducts.includes(e.id)?"bi-heart-fill":"bi-heart"]]),id:e.id},null,10,Ft)],8,jt),t("button",{href:"#",class:"custom-btn custom-btn-toGreen text-center w-60 w-lg-100 border-1 add-to-cart",onClick:l(y=>s.addToCart(e.id),["prevent"])},$t,8,Gt)])])])]),_:2},1032,["to"]))),128))])])):p("",!0)])],64)):n.searchWord?(o(),i("div",qt,[t("p",Ut," 搜尋不到「"+a(n.searchWord)+"」相關商品，你要不要試試其他關鍵字呢？ ",1)])):(o(),i("div",zt,[t("p",Ot," 目前「"+a(n.currentCategory)+"」還沒有上架商品～您可以逛逛其他分類 ",1)])),s.currentProducts.length!==0?(o(),i("div",Yt,[h(L,{"total-items":s.categoryProducts.length,"items-per-page":12,"max-pages-shown":3,modelValue:n.currentProductsPage,"onUpdate:modelValue":r[8]||(r[8]=e=>n.currentProductsPage=e),onClick:u.changeCurrentPage,"pagination-container-class":"cus-pagination ","paginate-buttons-class":"page-link","number-buttons-class":"fs-8","active-page-class":"active",backButtonClass:n.currentProductsPage===1?"disabled":"back-button",nextButtonClass:n.currentProductsPage===Math.ceil(this.categoryProducts.length/12)?"disabled":"next-button"},{"prev-button":d(()=>[Rt]),"next-button":d(()=>[Et]),_:1},8,["total-items","modelValue","onClick","backButtonClass","nextButtonClass"])])):p("",!0),s.loadingStatus.loadingGetProducts?(o(),i("div",Jt,Qt)):p("",!0),h(B,{active:s.isLoading,"onUpdate:active":r[9]||(r[9]=e=>s.isLoading=e)},null,8,["active"])])])])],64)}const ce=I(H,[["render",Xt],["__scopeId","data-v-ea47c17c"]]);export{ce as default};
