import{y as c,C as s}from"./index-fOpr-nR3.js";import{S as a}from"./sweetalert2.all-BRrQw1Rc.js";var l={VITE_APP_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_API_NAME:"greensheep",VITE_LINE_CLIENT_ID:"x9iTcS6m9Fdlz8XFfAbkqs",VITE_LINE_CLIENT_SECRET:"iGiOLRLmU2aNTDuObVQlcP5XzPYSbUzJ9gvUl4YvPzx",BASE_URL:"/greensheep/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:r,VITE_APP_API_NAME:n}=l,h=c("cartStore",{state:()=>({carts:[],cart:{},deliverData:{},isLoading:!1}),actions:{addToCart(t,e=1){const o={product_id:t,qty:e};s.post(`${r}/api/${n}/cart`,{data:o}).then(()=>{this.getCarts(),a.fire({position:"top-end",icon:"success",title:"加入購物車成功",showConfirmButton:!1,toast:!0,timer:1500})}).catch(i=>{console.log(i)})},getCarts(){const t=`${r}/api/${n}/cart`;s.get(t).then(e=>{this.carts=e.data.data.carts}).catch(e=>{console.log(e)})},updateCart(t){const e=`${r}/api/${n}/cart/${t.id}`,o={data:{product_id:t.product.id,qty:t.qty}};this.isLoading=!0,s.put(e,o).then(()=>{this.getCarts(),this.isLoading=!1,a.fire({position:"top-end",icon:"success",title:"修改數量成功",showConfirmButton:!1,toast:!0,timer:1500})}).catch(i=>{console.log(i)})},deleteCart(t){const e=`${r}/api/${n}/cart/${t}`;a.fire({title:"是否刪除該商品?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#9ea9a0",cancelButtonColor:"#566b5a",cancelButtonText:"  否  ",confirmButtonText:"  是  "}).then(o=>{o.isConfirmed&&(this.isLoading=!0,s.delete(e).then(()=>{this.isLoading=!1,a.fire({position:"top-end",icon:"success",title:"商品刪除成功",showConfirmButton:!1,toast:!0,timer:1500}),this.getCarts()}).catch(i=>{console.log(i)}))})},deleteAllCarts(){if(this.carts.length===0)a.fire({icon:"warning",title:"購物車內沒有商品",showConfirmButton:!1,timer:1500});else{const t=`${r}/api/${n}/carts`;a.fire({title:"你要刪除購物車的全部商品?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#9ea9a0",cancelButtonColor:"#566b5a",cancelButtonText:"  取消刪除  ",confirmButtonText:"  確定刪除  "}).then(e=>{e.isConfirmed&&(this.isLoading=!0,s.delete(t).then(()=>{this.isLoading=!1,a.fire({position:"top-end",icon:"success",title:"所有商品刪除成功",showConfirmButton:!1,toast:!0,timer:1500}),this.getCarts()}).catch(o=>{console.log(o)}))})}},getDeliverData(t){this.deliverData={...t}}},getters:{total(){let t=0;return this.carts.forEach(e=>{t+=e.final_total}),parseInt(t)}}});export{h as c};
