import{y as n,z as s}from"./index-YmKfqLRp.js";import{S as r}from"./sweetalert2.all-DhxF9L7-.js";var l={VITE_APP_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_API_NAME:"greensheep",BASE_URL:"/greensheep/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:i,VITE_APP_API_NAME:c}=l,p=n("cartStore",{state:()=>({carts:[],cart:{},deliverData:{}}),actions:{addToCart(t,e=1){const o={product_id:t,qty:e};s.post(`${i}/api/${c}/cart`,{data:o}).then(()=>{this.getCarts(),r.fire({position:"top-end",icon:"success",title:"加入購物車成功",showConfirmButton:!1,toast:!0,timer:1500})}).catch(a=>{console.log(a)})},getCarts(){const t=`${i}/api/${c}/cart`;s.get(t).then(e=>{this.carts=e.data.data.carts}).catch(e=>{console.log(e)})},updateCart(t){const e=`https://ec-course-api.hexschool.io/v2/api/greensheep/cart/${t.id}`,o={data:{product_id:t.id,qty:t.qty}};s.put(e,o).then(()=>{this.getCarts(),r.fire({position:"top-end",icon:"success",title:"修改數量成功",showConfirmButton:!1,toast:!0,timer:1500})}).catch(a=>{console.log(a)})},deleteCart(t){this.isLoading=!0;const e=`https://ec-course-api.hexschool.io/v2/api/greensheep/cart/${t}`;r.fire({title:"是否刪除該商品?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"  否  ",confirmButtonText:"  是  "}).then(o=>{o.isConfirmed&&s.delete(e).then(()=>{r.fire({title:"刪除成功!",icon:"success"}),this.getCarts()}).catch(a=>{console.log(a)})})},getDeliverData(t){this.deliverData={...t},console.log(this.deliverData)}},getters:{total(){let t=0;return this.carts.forEach(e=>{t+=e.final_total}),t}}});export{p as c};
