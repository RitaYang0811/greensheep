import{y as c,C as s}from"./index-PEAonJb-.js";import{S as a}from"./sweetalert2.all-YVr8EH9K.js";var l={VITE_APP_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_API_NAME:"greensheep",VITE_LINE_CLIENT_ID:"x9iTcS6m9Fdlz8XFfAbkqs",VITE_LINE_CLIENT_SECRET:"iGiOLRLmU2aNTDuObVQlcP5XzPYSbUzJ9gvUl4YvPzx",BASE_URL:"/greensheep/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:i,VITE_APP_API_NAME:n}=l,f=c("cartStore",{state:()=>({carts:[],cart:{},deliverData:{}}),actions:{addToCart(t,e=1){const o={product_id:t,qty:e};s.post(`${i}/api/${n}/cart`,{data:o}).then(()=>{this.getCarts(),a.fire({position:"top-end",icon:"success",title:"加入購物車成功",showConfirmButton:!1,toast:!0,timer:1500})}).catch(r=>{console.log(r)})},getCarts(){const t=`${i}/api/${n}/cart`;s.get(t).then(e=>{this.carts=e.data.data.carts}).catch(e=>{console.log(e)})},updateCart(t){const e=`${i}/api/${n}/cart/${t.id}`,o={data:{product_id:t.product.id,qty:t.qty}};setTimeout(()=>{s.put(e,o).then(()=>{this.getCarts(),a.fire({position:"top-end",icon:"success",title:"修改數量成功",showConfirmButton:!1,toast:!0,timer:1500})}).catch(r=>{console.log(r)})},1500)},deleteCart(t){this.isLoading=!0;const e=`${i}/api/${n}/cart/${t}`;a.fire({title:"是否刪除該商品?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#566b5a",cancelButtonText:"  否  ",confirmButtonText:"  是  "}).then(o=>{o.isConfirmed&&s.delete(e).then(()=>{a.fire({position:"top-end",icon:"success",title:"商品刪除成功",showConfirmButton:!1,toast:!0,timer:1500}),this.getCarts()}).catch(r=>{console.log(r)})})},deleteAllCarts(){const t=`${i}/api/${n}/carts`;a.fire({title:"是否刪除購物車全部商品?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#566b5a",cancelButtonText:"  否  ",confirmButtonText:"  是  "}).then(e=>{e.isConfirmed&&s.delete(t).then(()=>{a.fire({position:"top-end",icon:"success",title:"所有商品刪除成功",showConfirmButton:!1,toast:!0,timer:1500}),this.getCarts()}).catch(o=>{console.log(o)})})},getDeliverData(t){this.deliverData={...t}}},getters:{total(){let t=0;return this.carts.forEach(e=>{t+=e.final_total}),parseInt(t)}}});export{f as c};
