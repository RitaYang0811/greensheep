import{y as a,C as c}from"./index-fOpr-nR3.js";var r={VITE_APP_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_API_NAME:"greensheep",VITE_LINE_CLIENT_ID:"x9iTcS6m9Fdlz8XFfAbkqs",VITE_LINE_CLIENT_SECRET:"iGiOLRLmU2aNTDuObVQlcP5XzPYSbUzJ9gvUl4YvPzx",BASE_URL:"/greensheep/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_LINE_CLIENT_ID:i,VITE_LINE_CLIENT_SECRET:p}=r,l=a("lineNotifyStore",{state:()=>({accessToken:null}),actions:{lineGetOrder(){const e=encodeURIComponent("https://ritayang0811.github.io/greensheep/#/lineNotify"),s=`https://notify-bot.line.me/oauth/authorize?response_type=code&client_id=${i}&redirect_uri=${e}&state=12345&scope=notify`;window.location.href=s},lineGetAccessToken(e){const t={fn:"getToken",code:e,redirect_uri:"https://ritayang0811.github.io/greensheep/#/lineNotify",client_id:i,client_secret:p};c.post("https://script.google.com/macros/s/AKfycbyWxX2sYUoAdDTD7LHdivBF_PuaEjvaUMVjqdSOnzlPo2fNoxICBCbe7UTDh3k_g_7r/exec",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(o=>{const{data:n}=o;this.accessToken=n.access_token,localStorage.setItem("accessToken",this.accessToken),n.status===200&&this.sendLineNotification(n.access_token)}).catch(o=>{console.error(o)})},sendLineNotification(e){const t="https://script.google.com/macros/s/AKfycbyWxX2sYUoAdDTD7LHdivBF_PuaEjvaUMVjqdSOnzlPo2fNoxICBCbe7UTDh3k_g_7r/exec",s={message:"系統可以順利發訊息給你囉！",accessToken:e};c.post(t,s,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).catch(o=>{console.error(o)})},sendNewOrderNotification(e){const t="https://script.google.com/macros/s/AKfycbyWxX2sYUoAdDTD7LHdivBF_PuaEjvaUMVjqdSOnzlPo2fNoxICBCbe7UTDh3k_g_7r/exec",s={message:"恭喜你，收到新訂單囉！",accessToken:e};c.post(t,s,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).catch(o=>{console.error(o)})}}});export{l};
