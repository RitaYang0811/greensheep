import{y as i,z as t}from"./index-vQIT2nmS.js";import{S as d}from"./sweetalert2.all-l2V7mD8V.js";var a={VITE_APP_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_API_NAME:"greensheep",BASE_URL:"/greensheep/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:n,VITE_APP_API_NAME:s}=a,h=i("orderStore",{state:()=>({allOrders:[],unpaidOrders:[],paidOrders:[],deletedOrders:[],doneOrders:[]}),actions:{async getAllOrders(){try{this.allOrders=[],this.unpaidOrders=[],this.paidOrders=[];const o=`${n}/api/${s}/admin/orders`,r=await t.get(o);this.allOrders=r.data.orders,this.allOrders.forEach(e=>{e.orderStatus||(e.orderStatus={getOrder:!0,making:!1,sendProduct:!1,done:!1}),e.is_deleted?this.deletedOrders.push(e):e.is_paid?this.paidOrders.push(e):this.unpaidOrders.push(e),e.orderStatus.done&&this.doneOrders.push(e)})}catch(o){console.log(o)}},updateOrder(o){const r=`${n}/api/${s}/admin/order/${o.id}`;o.orderStatus=this.orderStatus,t.put(r,{data:o}).then(()=>{d.fire({position:"top-end",icon:"success",title:"訂單修改成功",showConfirmButton:!1,toast:!0,timer:1500}),location.reload()}).catch(e=>{console.log(e)})},deleteOrder(o){const r=`${n}/api/${s}/admin/order/${o.id}`;d.fire({title:"是否刪除該訂單?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#566b5a",cancelButtonText:"  否  ",confirmButtonText:"  是  "}).then(e=>{e.isConfirmed&&(console.log("delete"),o.is_deleted=!0,t.put(r,{data:o}).then(l=>{console.log(l),location.reload()}).catch(l=>{console.log(l)}))}),console.log(o)},recoverDelete(o){const r=`${n}/api/${s}/admin/order/${o.id}`;o.is_deleted=!1,t.put(r,{data:o}).then(e=>{console.log(e),location.reload(),console.log("Rocover Delete")}).catch(e=>{console.log(e)})},confirmDelete(o){const r=`${n}/api/${s}/admin/order/${o}`;d.fire({title:"確認永久刪除該訂單?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#566b5a",cancelButtonText:"  否  ",confirmButtonText:"  是  "}).then(e=>{e.isConfirmed&&t.delete(r).then(()=>{location.reload()}).catch(l=>{console.log(l)})})},deleteAllOrders(){const o=`${n}/api/${s}/admin/orders/all`;d.fire({title:"確認永久刪除全部訂單?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#566b5a",cancelButtonText:"  否  ",confirmButtonText:"  是  "}).then(r=>{r.isConfirmed&&t.delete(o).then(()=>{location.reload()}).catch(e=>{console.log(e)})})}}});export{h as o};
