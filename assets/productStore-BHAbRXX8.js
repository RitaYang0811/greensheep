import{y as c,z as s}from"./index-vQIT2nmS.js";const u=c("searchStore",{state:()=>({searchQuery:""}),actions:{setSearchWord(e){this.searchQuery=e,console.log("store搜索詞",this.searchQuery)}}});var a={VITE_APP_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_API_NAME:"greensheep",BASE_URL:"/greensheep/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:r,VITE_APP_API_NAME:i}=a,n=c("productStore",{state:()=>({products:[],categoryProducts:[],currentProducts:[],currentPage:1,category:"全部商品 ALL",categories:["項鍊 PENDANT","戒指 RING","耳環 EARRINGS","手鍊 BRACELET","其他配件 OTHERS"],productInfo:{},recommendProducts:[],isLoading:!1,loadingStatus:{loadingGetProducts:!1,loadingGetProduct:!1,loadingFilterProducts:!1}}),actions:{async getProducts(){this.isLoading=!0;const e=`${r}/api/${i}/products/all`;try{const t=await s.get(e);this.products=t.data.products,this.getFilterProducts("",1,"timeN2O")}catch(t){alert(t.data.message)}this.isLoading=!1},getSort(e){if(e==="new")return this.showTitle="最近更新",console.log("1"),this.products.sort((t,o)=>o.updateTime-t.updateTime);if(e==="priceH2L")return this.showTitle="價格 - 由高到低",console.log("2"),this.products.sort((t,o)=>o.price-t.price);if(e==="priceL2H")return this.showTitle="價格 - 由低到高",console.log("2"),this.products.sort((t,o)=>t.price-o.price);if(e==="timeN2O")return this.showTitle="上架時間 - 由新到舊",console.log("3"),this.products.sort((t,o)=>o.createTime-t.createTime);if(e==="timeO2N")return this.showTitle="上架時間 - 由舊到新",console.log("4"),this.products.sort((t,o)=>t.createTime-o.createTime)},getFilterProducts(e,t=1,o){this.loadingStatus.loadingFilterProducts=!0,this.category=e,e==="全部商品 ALL"||e===""?(this.category="全部商品 ALL",this.currentPage=1,this.getSort(o),console.log(this.products),this.categoryProducts=this.products,this.currentProducts=this.categoryProducts.slice((t-1)*12,t*12),this.loadingStatus.loadingFilterProducts=!1,console.log("全部商品",this.currentProducts,this.categoryProducts)):e&&(console.log("@@@",e),this.getSort(o),this.categoryProducts=this.products.filter(d=>d.category===e),this.currentProducts=this.categoryProducts.slice((t-1)*12,t*12),this.loadingStatus.loadingFilterProducts=!1)},async getProductInfo(e){this.loadingStatus.loadingGetProduct=!0;const t=`${r}/api/${i}/product/${e}`;try{const o=await s.get(t);console.log(o.data),this.productInfo=o.data.product}catch(o){console.error(o)}finally{this.loadingStatus.loadingGetProduct=!1}},async getRecommendProducts(e){for(this.recommendProducts=[];this.recommendProducts.length<4;){const t=this.products[Math.floor(Math.random()*this.products.length)];(!this.recommendProducts.includes(t)||e===this.recommendProducts.id)&&this.recommendProducts.push(t)}}}});export{n as p,u as s};
