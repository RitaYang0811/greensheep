import{z as i,A as c}from"./index-CtyhMs3V.js";const n=i("searchStore",{state:()=>({searchQuery:""}),actions:{setSearchWord(t){this.searchQuery=t,console.log("store搜索詞",this.searchQuery)}}});var l={VITE_APP_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_API_NAME:"greensheep",BASE_URL:"/greensheep/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:r,VITE_APP_API_NAME:a}=l;n();const h=i("productStore",{state:()=>({products:[],filterProducts:[],recommendProducts:[],category:"全部商品 ALL",categories:["項鍊 PENDANT","戒指 RING","耳環 EARRINGS","手鍊 BRACELET"],productInfo:{},pagination:{},loadingStatus:!1}),actions:{getProducts(t,o=1){this.loadingStatus=!0;const{category:s=""}=t.query;console.log("getProducts的路由",t),this.category=s;const d=`${r}/api/${a}/products?category=${s}&page=${o}`;c.get(d).then(e=>{this.products=e.data.products,console.log("所有商品",this.products),this.pagination={...e.data.pagination}}).catch(e=>{console.log(e.data.message)}).finally(()=>{this.loadingStatus=!1})},getProductInfo(t){let o=`${r}/api/${a}/product/${t}`;c.get(o).then(s=>{this.loadingStatus=!0,console.log(s.data),this.productInfo=s.data.product}).catch(s=>{console.log(s)}).finally(()=>{this.loadingStatus=!1})},getRecommendProducts(t){for(this.recommendProducts=[];this.recommendProducts.length<4;){const o=this.products[Math.floor(Math.random()*this.products.length)];(!this.recommendProducts.includes(o)||t===this.recommendProducts.id)&&this.recommendProducts.push(o)}},getFilterProducts(t){console.log("111",t),t===""||!t?(this.filterProducts=this.products,console.log("a")):(this.filterProducts=this.products.filter(o=>o.title.match(t)),console.log("b")),console.log("getFilterProducts",this.filterProducts,t)}}});export{h as p,n as s};
