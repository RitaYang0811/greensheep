import{y as a,z as o}from"./index-Dr79K2c5.js";var u={VITE_APP_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_API_NAME:"greensheep",VITE_LINE_CLIENT_ID:"x9iTcS6m9Fdlz8XFfAbkqs",VITE_LINE_REDIRECT_URI:"http://localhost:5173/greensheep/#/admin/home",VITE_LINE_CLIENT_SECRET:"iGiOLRLmU2aNTDuObVQlcP5XzPYSbUzJ9gvUl4YvPzx",BASE_URL:"/greensheep/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:i,VITE_APP_API_NAME:c}=u,h=a("productStore",{state:()=>({products:[],categoryProducts:[],currentProducts:[],currentPage:1,category:"全部商品 ALL",searchWord:"",categories:["全部商品 ALL","項鍊 PENDANT","戒指 RING","耳環 EARRINGS","手鍊 BRACELET","其他配件 OTHERS"],showTitle:"",productInfo:{},bestSeller:["-NsVQCmAiuvXWHJ9cf1A","-NsVL3yywAfe5aYKsTVv","-NsUsi2n1gdOSF0I798e"],bestSellersProducts:[],recommendProducts:[],isLoading:!1,loadingStatus:{loadingGetProducts:!1,loadingGetProduct:!1,loadingFilterProducts:!1}}),actions:{async getProducts(){this.isLoading=!0;const s=`${i}/api/${c}/products/all`;try{const t=await o.get(s);this.products=t.data.products}catch(t){alert(t.data.message)}this.isLoading=!1},getSort(s){if(s==="priceH2L")return this.showTitle="價格 - 由高到低",this.products.sort((t,e)=>e.price-t.price);if(s==="priceL2H")return this.showTitle="價格 - 由低到高",this.products.sort((t,e)=>t.price-e.price);if(s==="timeN2O")return this.showTitle="上架時間 - 由新到舊",this.products.sort((t,e)=>e.createTime-t.createTime);if(s==="timeO2N")return this.showTitle="上架時間 - 由舊到新",this.products.sort((t,e)=>t.createTime-e.createTime)},getFilterProducts(s,t=1,e="timeN2O",d){this.loadingStatus.loadingFilterProducts=!0,this.category=s,this.searchWord=d,s===void 0?(this.currentPage=1,this.categoryProducts=this.products.filter(r=>r.title.match(this.searchWord)),this.currentProducts=this.categoryProducts.slice((t-1)*12,t*12),this.loadingStatus.loadingFilterProducts=!1):s==="全部商品 ALL"?(this.currentPage=1,this.getSort(e),this.categoryProducts=this.products,this.currentProducts=this.categoryProducts.slice((t-1)*12,t*12),this.loadingStatus.loadingFilterProducts=!1,console.log("全部商品",this.currentProducts,this.categoryProducts,this.showTitle)):(this.getSort(e),this.categoryProducts=this.products.filter(r=>r.category===s),this.currentProducts=this.categoryProducts.slice((t-1)*12,t*12),this.loadingStatus.loadingFilterProducts=!1)},async getProductInfo(s){this.loadingStatus.loadingGetProduct=!0;const t=`${i}/api/${c}/product/${s}`;try{const e=await o.get(t);console.log(e.data),this.productInfo=e.data.product}catch(e){console.error(e)}finally{this.loadingStatus.loadingGetProduct=!1}},getRecommendProducts(s){for(this.recommendProducts=[];this.recommendProducts.length<4;){const t=this.products[Math.floor(Math.random()*this.products.length)];!this.recommendProducts.some(e=>e.id===t.id)&&t.id!==s&&this.recommendProducts.push(t)}}}});export{h as p};
