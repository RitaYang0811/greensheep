import{y as n,z as a}from"./index-2hhN2grE.js";var i={VITE_APP_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_API_NAME:"greensheep",BASE_URL:"/greensheep/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:c,VITE_APP_API_NAME:r}=i,l=n("productStore",{state:()=>({products:[],recommendProducts:[],category:"全部商品 ALL",categories:["項鍊 PENDANT","戒指 RING","耳環 EARRINGS","手鍊 BRACELET"],productInfo:{},pagination:{},loadingStatus:!1}),actions:{getProducts(e,o=1){this.loadingStatus=!0,console.log(this.loadingStatus);const{category:t=""}=e.query;this.category=t;const d=`${c}/api/${r}/products?category=${t}&page=${o}`;a.get(d).then(s=>{this.products=s.data.products,console.log("所有商品",this.products),this.pagination={...s.data.pagination}}).catch(s=>{console.log(s.data.message)}).finally(()=>{this.loadingStatus=!1})},getProductInfo(e){let o=`${c}/api/${r}/product/${e}`;a.get(o).then(t=>{this.loadingStatus=!0,console.log(t.data),this.productInfo=t.data.product}).catch(t=>{console.log(t)}).finally(()=>{this.loadingStatus=!1})},getRecommendProducts(e){for(this.recommendProducts=[];this.recommendProducts.length<4;){const o=this.products[Math.floor(Math.random()*this.products.length)];(!this.recommendProducts.includes(o)||e===this.recommendProducts.id)&&this.recommendProducts.push(o)}console.log("推薦商品",this.recommendProducts)}}});export{l as p};
