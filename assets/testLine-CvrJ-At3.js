import{_ as l,y as a,c as _,o as p}from"./index-x5cJ4SF7.js";var d={VITE_APP_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_API_NAME:"greensheep",VITE_LINE_CLIENT_ID:"x9iTcS6m9Fdlz8XFfAbkqs",VITE_LINE_CLIENT_SECRET:"iGiOLRLmU2aNTDuObVQlcP5XzPYSbUzJ9gvUl4YvPzx",BASE_URL:"/greensheep/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_LINE_CLIENT_ID:r,VITE_LINE_CLIENT_SECRET:h}=d,E={methods:{lineGetOrder(){const t=encodeURIComponent("https://ritayang0811.github.io/greensheep/#/test"),s=`https://notify-bot.line.me/oauth/authorize?response_type=code&client_id=${r}&redirect_uri=${t}&state=12345&scope=notify`;window.location.href=s},lineGetAccessToken(t){console.log("code",t);const e={fn:"getToken",code:t,redirect_uri:"https://ritayang0811.github.io/greensheep/#/test",client_id:r,client_secret:h};console.log("params",e),a.post("https://script.google.com/macros/s/AKfycbyWxX2sYUoAdDTD7LHdivBF_PuaEjvaUMVjqdSOnzlPo2fNoxICBCbe7UTDh3k_g_7r/exec",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(o=>{console.log(o);const{data:n}=o;this.accessToken=n.access_token,n.status===200&&this.sendLineNotification(n.access_token),console.log("token",this.accessToken)}).catch(o=>{console.error(o)})},sendLineNotification(t){const e="https://script.google.com/macros/s/AKfycbyWxX2sYUoAdDTD7LHdivBF_PuaEjvaUMVjqdSOnzlPo2fNoxICBCbe7UTDh3k_g_7r/exec",s={message:"已經收到您的訂單囉！",accessToken:t};a.post(e,s,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(o=>{console.log(o.data)}).catch(o=>{console.error(o)})}},created(){const e=new URLSearchParams(window.location.search).get("code");e&&(console.log("@@",e),this.lineGetAccessToken(e))}};function T(t,e,s,o,n,c){return p(),_("button",{type:"button",class:"my-40",onClick:e[0]||(e[0]=(...i)=>c.lineGetOrder&&c.lineGetOrder(...i))},"點我")}const g=l(E,[["render",T]]);export{g as default};
